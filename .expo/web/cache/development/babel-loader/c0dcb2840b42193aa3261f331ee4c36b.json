{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/videosPage/VideosDetailView.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { FlatList } from 'react-native-gesture-handler';\nimport { ON_VIDEO_UPDATED } from \"../../utils/graphql/GraphqlClient\";\nimport { useSubscription } from '@apollo/client';\nimport FullPageVideos from \"../modals/FullPageVideos\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { colors } from \"../../styles/colors\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nexport default function VideosDetailView(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      videos = _useState4[0],\n      setVideos = _useState4[1];\n\n  var thumbnailPadding = '0.2%';\n  var screenWidth = Math.round(Dimensions.get('window').width);\n  var thumbnailWidth = screenWidth * 0.33;\n  var thumbnailHeight = screenWidth * 0.4;\n  useEffect(function () {\n    var params = props.route.params;\n\n    if (params != undefined) {\n      setTitle(params.title);\n      setVideos(params.videos);\n    }\n  }, [props.route]);\n\n  function goToAddPage() {\n    props.navigation.navigate('Add');\n  }\n\n  function removeVideo(videoId) {\n    setVideos(videos.filter(function (video) {\n      return video.id != videoId;\n    }));\n  }\n\n  function VideoView(_ref) {\n    var video = _ref.video;\n\n    if (video.item.type == 'blankVideo') {\n      return React.createElement(BlankVideoView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 20\n        }\n      });\n    } else if (video.item.type == 'uploadedVideo') {\n      return React.createElement(UploadingView, {\n        uploadingVideo: video.item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 20\n        }\n      });\n    } else {\n      return React.createElement(IndividualVideoView, {\n        video: video.item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 20\n        }\n      });\n    }\n  }\n\n  function UploadingView(_ref2) {\n    var uploadingVideo = _ref2.uploadingVideo;\n\n    function goToVideo() {\n      setFullVideoVisible(true);\n    }\n\n    function VideoSubscription(_ref3) {\n      var passthroughId = _ref3.passthroughId;\n\n      var _useSubscription = useSubscription(ON_VIDEO_UPDATED, {\n        variables: {\n          passthroughId: passthroughId\n        }\n      }),\n          data = _useSubscription.data,\n          loading = _useSubscription.loading,\n          error = _useSubscription.error;\n\n      if (loading) {\n        return null;\n      }\n\n      if (error || !data) {\n        return null;\n      }\n\n      if (data) {\n        var _videos = data.videos;\n\n        if (_videos.length > 0) {\n          var video_data = _videos[0];\n          var _status = video_data.status;\n\n          if (_status == \"ready\") {\n            var tempUploadedVideos = uploadedVideos.map(function (uploadedVideo) {\n              if (uploadedVideo.passthroughId == passthroughId) {\n                return _objectSpread(_objectSpread({}, uploadedVideo), {}, {\n                  status: _status\n                });\n              } else {\n                return uploadedVideo;\n              }\n            });\n            setUploadedVideos(tempUploadedVideos);\n          }\n        }\n      }\n\n      return null;\n    }\n\n    var _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        fullVideoVisible = _useState6[0],\n        setFullVideoVisible = _useState6[1];\n\n    var questionText = uploadingVideo.questionText;\n    var thumbnailUri = uploadingVideo.thumbnailUri;\n    var videoUri = uploadingVideo.videoUri;\n    var status = uploadingVideo.status;\n    var passthroughId = uploadingVideo.passthroughId;\n    var id = uploadingVideo.id;\n\n    if (status == \"ready\") {\n      return React.createElement(View, {\n        style: {\n          padding: thumbnailPadding\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: goToVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: thumbnailWidth,\n          height: thumbnailHeight\n        },\n        source: {\n          uri: thumbnailUri\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      })), React.createElement(FullPageVideos, {\n        visible: fullVideoVisible,\n        setVisible: setFullVideoVisible,\n        source: videoUri,\n        questionText: questionText,\n        showOptions: true,\n        videoId: id,\n        removeVideo: removeVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        style: {\n          padding: thumbnailPadding\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }, React.createElement(ImageBackground, {\n        style: {\n          width: thumbnailWidth,\n          height: thumbnailHeight\n        },\n        source: {\n          uri: thumbnailUri\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          backgroundColor: 'rgba(0,0,0,.6)',\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"small\",\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }\n      }))), React.createElement(VideoSubscription, {\n        passthroughId: passthroughId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  function IndividualVideoView(_ref4) {\n    var video = _ref4.video;\n\n    function goToVideo() {\n      setFullVideoVisible(true);\n    }\n\n    var _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        fullVideoVisible = _useState8[0],\n        setFullVideoVisible = _useState8[1];\n\n    var muxPlaybackId = video.muxPlaybackId;\n    var questionText = video.videoQuestion ? video.videoQuestion.questionText : \"\";\n    var muxPlaybackUrl = 'https://image.mux.com/' + muxPlaybackId + '/thumbnail.jpg?time=0';\n    return React.createElement(View, {\n      style: {\n        padding: thumbnailPadding\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: goToVideo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: thumbnailWidth,\n        height: thumbnailHeight\n      },\n      source: {\n        uri: muxPlaybackUrl\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    })), React.createElement(FullPageVideos, {\n      visible: fullVideoVisible,\n      setVisible: setFullVideoVisible,\n      source: 'https://stream.mux.com/' + muxPlaybackId + '.m3u8',\n      questionText: questionText,\n      showOptions: true,\n      videoId: video.id,\n      removeVideo: removeVideo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  function BlankVideoView() {\n    return React.createElement(View, {\n      style: {\n        padding: thumbnailPadding\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: goToAddPage,\n      style: {\n        backgroundColor: colors.secondaryBlack,\n        width: thumbnailWidth,\n        height: thumbnailHeight,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, React.createElement(Ionicons, {\n      name: \"ios-add\",\n      color: \"#eee\",\n      size: 60,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: colors.primaryBlack\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: colors.primaryBlack,\n      justifyContent: 'flex-end',\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      paddingBottom: 27,\n      fontSize: 18,\n      color: colors.primaryWhite\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, title)), React.createElement(View, {\n    style: {\n      flex: 6\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, React.createElement(FlatList, {\n    data: videos,\n    numColumns: 3,\n    renderItem: function renderItem(video) {\n      return React.createElement(VideoView, {\n        video: video,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 46\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(video) {\n      return video.id;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/videosPage/VideosDetailView.tsx"],"names":["React","useEffect","useState","FlatList","ON_VIDEO_UPDATED","useSubscription","FullPageVideos","Ionicons","colors","VideosDetailView","props","title","setTitle","videos","setVideos","thumbnailPadding","screenWidth","Math","round","Dimensions","get","width","thumbnailWidth","thumbnailHeight","params","route","undefined","goToAddPage","navigation","navigate","removeVideo","videoId","filter","video","id","VideoView","item","type","UploadingView","uploadingVideo","goToVideo","setFullVideoVisible","VideoSubscription","passthroughId","variables","data","loading","error","length","video_data","status","tempUploadedVideos","uploadedVideos","map","uploadedVideo","setUploadedVideos","fullVideoVisible","questionText","thumbnailUri","videoUri","padding","height","uri","backgroundColor","flex","justifyContent","alignItems","IndividualVideoView","muxPlaybackId","videoQuestion","muxPlaybackUrl","BlankVideoView","secondaryBlack","primaryBlack","paddingBottom","fontSize","color","primaryWhite"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Image, Text, TouchableOpacity, ImageBackground, ActivityIndicator } from 'react-native';\nimport { FlatList } from 'react-native-gesture-handler';\nimport { ON_VIDEO_UPDATED } from '../../utils/graphql/GraphqlClient';\nimport { useSubscription } from '@apollo/client';\nimport FullPageVideos from '../modals/FullPageVideos';\nimport { _retrieveUserId, _storeUserId, _retrieveDoormanUid, _storeDoormanUid, _retrieveName, _retrieveBio } from '../../utils/asyncStorage'; \nimport { Ionicons} from '@expo/vector-icons'\nimport { colors } from '../../styles/colors'; \nimport { Dimensions } from \"react-native\"; \n\nexport default function VideosDetailView(props) {\n\n    const [title, setTitle] = useState('');\n    const [videos, setVideos] = useState([]); \n    // const [uploadedVideos, setUploadedVideos] = useState([]); \n    const thumbnailPadding = '0.2%'; \n    const screenWidth = Math.round(Dimensions.get('window').width);\n    const thumbnailWidth = screenWidth * 0.33; \n    const thumbnailHeight = screenWidth * 0.4; \n\n    // changes in routes\n    useEffect(() => {\n        let params = props.route.params;\n        if (params != undefined){\n            setTitle(params.title); \n            setVideos(params.videos); \n        }\n    }, [props.route]);\n\n    function goToAddPage(){\n        props.navigation.navigate('Add');\n    }\n\n    function removeVideo(videoId){\n        setVideos(videos.filter(video => {return video.id != videoId })); \n    }\n\n\n    function VideoView({ video }){\n        if(video.item.type == 'blankVideo') {\n            return <BlankVideoView /> \n        } else if(video.item.type == 'uploadedVideo'){\n            return <UploadingView uploadingVideo={video.item} />\n        } else {\n            return <IndividualVideoView video={video.item} />\n        }\n    }\n\n\n    function UploadingView({ uploadingVideo }){\n\n        function goToVideo(){\n            setFullVideoVisible(true); \n        }\n\n        function VideoSubscription({passthroughId}){\n            const { data, loading, error } = useSubscription(ON_VIDEO_UPDATED, {variables: { passthroughId : passthroughId }}); \n            if(loading){\n                return null; \n            } \n            \n            if(error || !data) {\n                return null; \n            }\n\n            if(data){\n                const videos = data.videos; \n                if(videos.length > 0){\n                    const video_data = videos[0];\n                    const status = video_data.status;\n                    if(status == \"ready\"){\n                        const tempUploadedVideos = uploadedVideos.map(uploadedVideo => {\n                            if(uploadedVideo.passthroughId == passthroughId){\n                                return {...uploadedVideo, status: status}\n                            } else { return uploadedVideo }\n                        })\n                        setUploadedVideos(tempUploadedVideos); \n                    }\n                }\n            }\n\n            return null; \n        }\n    \n        const [fullVideoVisible, setFullVideoVisible] = useState(false);\n        const questionText = uploadingVideo.questionText;\n        const thumbnailUri = uploadingVideo.thumbnailUri;\n        const videoUri = uploadingVideo.videoUri; \n        const status = uploadingVideo.status; \n        const passthroughId = uploadingVideo.passthroughId; \n        const id = uploadingVideo.id; \n\n        if (status == \"ready\"){\n            return(\n                <View style={{ padding: thumbnailPadding}}>\n                    <TouchableOpacity onPress={goToVideo}>\n                        <Image \n                            style={{ width: thumbnailWidth, height: thumbnailHeight }}\n                            source={{uri: thumbnailUri }}\n                        />\n                    </TouchableOpacity>\n                    <FullPageVideos \n                        visible={fullVideoVisible} \n                        setVisible={setFullVideoVisible} \n                        source={videoUri}\n                        questionText={questionText}\n                        showOptions={true}\n                        videoId={id}\n                        removeVideo={removeVideo}\n                    />\n                </View>\n            )\n        } else {\n            return (\n                // <BlurView tint=\"dark\" intensity={40} style={{padding: '0.1%', width: squareWidth, height: squareWidth }}>\n                <View style={{ padding: thumbnailPadding}}>\n                    <ImageBackground\n                        style={{width: thumbnailWidth, height: thumbnailHeight }}\n                        source={{uri: thumbnailUri}}\n                    >\n                        <View style={{ backgroundColor: 'rgba(0,0,0,.6)', flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                            <ActivityIndicator size=\"small\" color=\"#eee\" />\n                        </View>\n                    </ImageBackground>\n                    <VideoSubscription passthroughId={passthroughId} />\n                </View>\n\n            )\n        }\n    }\n\n    function IndividualVideoView({ video }){\n        function goToVideo(){\n            setFullVideoVisible(true); \n        }\n    \n        const [fullVideoVisible, setFullVideoVisible] = useState(false);\n\n        const muxPlaybackId = video.muxPlaybackId;\n        const questionText = video.videoQuestion ? video.videoQuestion.questionText : \"\"; \n\n        const muxPlaybackUrl = 'https://image.mux.com/' + muxPlaybackId + '/thumbnail.jpg?time=0';\n        return(\n            <View style={{ padding: thumbnailPadding}}>\n                <TouchableOpacity onPress={goToVideo}>\n                    <Image \n                        style={{ width: thumbnailWidth, height: thumbnailHeight }}\n                        source={{uri: muxPlaybackUrl }}\n                    />\n                </TouchableOpacity>\n                <FullPageVideos \n                    visible={fullVideoVisible} \n                    setVisible={setFullVideoVisible} \n                    source={'https://stream.mux.com/' + muxPlaybackId + '.m3u8'}\n                    questionText={questionText}\n                    showOptions={true}\n                    videoId={video.id}\n                    removeVideo={removeVideo}\n\n                />\n            </View>\n        )\n    }\n\n    function BlankVideoView(){\n        return(\n            <View style={{ padding: thumbnailPadding}}>\n                <TouchableOpacity onPress={goToAddPage} style={{backgroundColor: colors.secondaryBlack, width: thumbnailWidth, height: thumbnailHeight, justifyContent: 'center', alignItems: 'center' }}>\n                    <Ionicons name=\"ios-add\" color={\"#eee\"} size={60} />\n                </TouchableOpacity>\n            </View>\n        )\n    }\n\n    return (\n        <View style={{ flex: 1, backgroundColor: colors.primaryBlack}}>\n            <View style={{ flex: 1, backgroundColor: colors.primaryBlack, justifyContent: 'flex-end', alignItems: 'center'}}>\n                <Text style={{ paddingBottom: 27, fontSize: 18, color: colors.primaryWhite }}>{title}</Text>\n            </View>\n            <View style={{ flex: 6 }}>\n                {/* <Text style={{ color: colors.primaryWhite}}>Hi</Text> */}\n                <FlatList\n                    data={videos}\n                    numColumns={3}\n                    renderItem={( video ) => <VideoView video={video} />}\n                    keyExtractor={video => video.id} \n                    />\n            </View>\n        </View>\n\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}