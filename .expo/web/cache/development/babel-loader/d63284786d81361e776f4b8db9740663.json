{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/homePage/HomeContents.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext, useRef, useMemo } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { homeStyles } from \"../../styles/homeStyles\";\nimport { BlurView } from 'expo-blur';\nimport { Ionicons, Entypo } from '@expo/vector-icons';\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { INSERT_LIKE, GET_VIDEOS, GET_NUMBER_VIDEOS, UPDATE_PUSH_TOKEN, GET_USER_INFO, UPDATE_VIDEO_LIKES, UPDATE_VIDEO_VIEWS, UPDATE_VIDEO_DISLIKES } from \"../../utils/graphql/GraphqlClient\";\nimport OptionsModal from \"./OptionsModal\";\nimport { UserIdContext } from \"../../utils/context/UserIdContext\";\nimport * as Segment from 'expo-analytics-segment';\nimport { _retrieveName, _retrievePushShown, _storePushShown, _storeName, _storeBio, _retrieveBio } from \"../../utils/asyncStorage\";\nimport AddVideoPopup from \"../modals/AddVideoPopup\";\nimport NoLikesPopup from \"../modals/NoLikesPopup\";\nimport PushPopup from \"../modals/PushPopup\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport MultipleVideos from \"../videosPage/MultipleVideos\";\nimport { useDoormanUser } from 'react-native-doorman';\nimport { Notifications } from 'expo';\nimport Constants from 'expo-constants';\nimport * as Permissions from 'expo-permissions';\nimport axios from 'axios';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SingleVideo from \"../videosPage/SingleVideo\";\nimport ProgressBar from 'react-native-progress/Bar';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { colors } from \"../../styles/colors\";\nimport { VideoCountContext } from \"../../utils/context/VideoCountContext\";\nimport { useIsFocused } from '@react-navigation/native';\nexport default function HomeContents(props) {\n  var isFocused = useIsFocused();\n\n  var _useDoormanUser = useDoormanUser(),\n      uid = _useDoormanUser.uid,\n      phoneNumber = _useDoormanUser.phoneNumber;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      videoData = _useState2[0],\n      setVideoData = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      questionText = _useState4[0],\n      setQuestionText = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shouldPlay = _useState6[0],\n      setShouldPlay = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userCount = _useState8[0],\n      setUserCount = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      currentUserVideoCount = _useState10[0],\n      setCurrentUserVideoCount = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentUserId = _useState12[0],\n      setCurrentUserId = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      currentName = _useState14[0],\n      setCurrentName = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      currentCollege = _useState16[0],\n      setCurrentCollege = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      currentCity = _useState18[0],\n      setCurrentCity = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      currentRegion = _useState20[0],\n      setCurrentRegion = _useState20[1];\n\n  var _useContext = useContext(UserIdContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      userId = _useContext2[0],\n      setUserId = _useContext2[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      name = _useState22[0],\n      setName = _useState22[1];\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      userIndex = _useState24[0],\n      setUserIndex = _useState24[1];\n\n  var _useState25 = useState(0),\n      _useState26 = _slicedToArray(_useState25, 2),\n      videoIndex = _useState26[0],\n      setVideoIndex = _useState26[1];\n\n  var _useState27 = useState(0),\n      _useState28 = _slicedToArray(_useState27, 2),\n      flags = _useState28[0],\n      setFlags = _useState28[1];\n\n  var _useState29 = useState(0),\n      _useState30 = _slicedToArray(_useState29, 2),\n      videoId = _useState30[0],\n      setVideoId = _useState30[1];\n\n  var _useState31 = useState(true),\n      _useState32 = _slicedToArray(_useState31, 2),\n      querying = _useState32[0],\n      setQuerying = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      initialized = _useState34[0],\n      setInitialized = _useState34[1];\n\n  var _useState35 = useState(''),\n      _useState36 = _slicedToArray(_useState35, 2),\n      muxPlaybackId = _useState36[0],\n      setMuxPlaybackId = _useState36[1];\n\n  var renderedUserIndex1 = useMemo(function () {\n    return userIndex % 2 === 0 ? userIndex : userIndex + 1;\n  }, [userIndex]);\n  var renderedUserIndex2 = useMemo(function () {\n    return userIndex % 2 === 1 ? userIndex : userIndex + 1;\n  }, [userIndex]);\n\n  var _useState37 = useState(null),\n      _useState38 = _slicedToArray(_useState37, 2),\n      profileVideoCount = _useState38[0],\n      setProfileVideoCount = _useState38[1];\n\n  var _useState39 = useState(false),\n      _useState40 = _slicedToArray(_useState39, 2),\n      addPopupVisible = _useState40[0],\n      setAddPopupVisible = _useState40[1];\n\n  var _useState41 = useState(''),\n      _useState42 = _slicedToArray(_useState41, 2),\n      expoPushToken = _useState42[0],\n      setExpoPushToken = _useState42[1];\n\n  var _useState43 = useState(false),\n      _useState44 = _slicedToArray(_useState43, 2),\n      pushPopupShown = _useState44[0],\n      setPushPopupShown = _useState44[1];\n\n  var _useState45 = useState(false),\n      _useState46 = _slicedToArray(_useState45, 2),\n      pushPopupVisible = _useState46[0],\n      setPushPopupVisible = _useState46[1];\n\n  var _useState47 = useState(''),\n      _useState48 = _slicedToArray(_useState47, 2),\n      pushName = _useState48[0],\n      setPushName = _useState48[1];\n\n  var _useState49 = useState([]),\n      _useState50 = _slicedToArray(_useState49, 2),\n      likeColors = _useState50[0],\n      setLikeColors = _useState50[1];\n\n  var _useState51 = useState([]),\n      _useState52 = _slicedToArray(_useState51, 2),\n      dislikeColors = _useState52[0],\n      setDislikeColors = _useState52[1];\n\n  var _useMutation = useMutation(INSERT_LIKE),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      insertLike = _useMutation2[0],\n      insertLikeData = _useMutation2[1].insertLikeData;\n\n  var _useMutation3 = useMutation(UPDATE_PUSH_TOKEN),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      updatePushToken = _useMutation4[0],\n      updatePushTokenData = _useMutation4[1].updatePushTokenData;\n\n  var _useMutation5 = useMutation(UPDATE_VIDEO_LIKES),\n      _useMutation6 = _slicedToArray(_useMutation5, 2),\n      updateVideoLikes = _useMutation6[0],\n      updateVideoLikesData = _useMutation6[1].updateVideoLikesData;\n\n  var _useMutation7 = useMutation(UPDATE_VIDEO_DISLIKES),\n      _useMutation8 = _slicedToArray(_useMutation7, 2),\n      updateVideoDislikes = _useMutation8[0],\n      updateVideoDislikesData = _useMutation8[1].updateVideoDislikesData;\n\n  var _useMutation9 = useMutation(UPDATE_VIDEO_VIEWS),\n      _useMutation10 = _slicedToArray(_useMutation9, 2),\n      updateVideoViews = _useMutation10[0],\n      updateVideoViewsData = _useMutation10[1].updateVideoViewsData;\n\n  var _useState53 = useState(false),\n      _useState54 = _slicedToArray(_useState53, 2),\n      optionsModalVisible = _useState54[0],\n      setOptionsModalVisible = _useState54[1];\n\n  var playbackObject = useRef(null);\n\n  var _useState55 = useState(false),\n      _useState56 = _slicedToArray(_useState55, 2),\n      timedOut = _useState56[0],\n      setTimedOut = _useState56[1];\n\n  var _useState57 = useState(false),\n      _useState58 = _slicedToArray(_useState57, 2),\n      noMoreVideos = _useState58[0],\n      setNoMoreVideos = _useState58[1];\n\n  var _useState59 = useState(false),\n      _useState60 = _slicedToArray(_useState59, 2),\n      noLikesLeft = _useState60[0],\n      setNoLikesLeft = _useState60[1];\n\n  var _useState61 = useState(props.lastPerformance),\n      _useState62 = _slicedToArray(_useState61, 2),\n      lastPerformance = _useState62[0],\n      setLastPerformance = _useState62[1];\n\n  var _useState63 = useState(props.groupPreference),\n      _useState64 = _slicedToArray(_useState63, 2),\n      groupPreference = _useState64[0],\n      setGroupPreference = _useState64[1];\n\n  var _useContext3 = useContext(VideoCountContext),\n      _useContext4 = _slicedToArray(_useContext3, 2),\n      videoCount = _useContext4[0],\n      setVideoCount = _useContext4[1];\n\n  var _useLazyQuery = useLazyQuery(GET_VIDEOS, {\n    onCompleted: function onCompleted(videosLower) {\n      processVideos(videosLower);\n    }\n  }),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getVideosLower = _useLazyQuery2[0],\n      videosLower = _useLazyQuery2[1].data;\n\n  var _useLazyQuery3 = useLazyQuery(GET_NUMBER_VIDEOS, {\n    onCompleted: function onCompleted(numberVideos) {\n      var count = numberVideos.videos_aggregate.aggregate.count;\n      setProfileVideoCount(count);\n    }\n  }),\n      _useLazyQuery4 = _slicedToArray(_useLazyQuery3, 2),\n      getNumberVideos = _useLazyQuery4[0],\n      numberVideos = _useLazyQuery4[1].data;\n\n  var _useLazyQuery5 = useLazyQuery(GET_USER_INFO, {\n    onCompleted: function onCompleted(userInfo) {\n      var users = userInfo.users;\n\n      if (users[0].firstName) {\n        setName(users[0].firstName);\n\n        _storeName(users[0].firstName);\n      }\n\n      ;\n\n      if (users[0].bio) {\n        _storeBio(users[0].bio);\n      }\n\n      Segment.identifyWithTraits(userId.toString(), {\n        'name': name,\n        'phoneNumber': phoneNumber\n      });\n      Segment.screen('Home');\n    }\n  }),\n      _useLazyQuery6 = _slicedToArray(_useLazyQuery5, 2),\n      getUserInfo = _useLazyQuery6[0],\n      userInfo = _useLazyQuery6[1].data;\n\n  var _panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: function onStartShouldSetPanResponder(evt, gestureState) {\n      return true;\n    },\n    onStartShouldSetPanResponderCapture: function onStartShouldSetPanResponderCapture(evt, gestureState) {\n      return true;\n    },\n    onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder(evt, gestureState) {},\n    onMoveShouldSetPanResponderCapture: function onMoveShouldSetPanResponderCapture(evt, gestureState) {},\n    onPanResponderGrant: function onPanResponderGrant(evt, gestureState) {},\n    onPanResponderMove: function onPanResponderMove(evt, gestureState) {},\n    onPanResponderTerminationRequest: function onPanResponderTerminationRequest(evt, gestureState) {\n      return true;\n    },\n    onPanResponderRelease: function onPanResponderRelease(evt, gestureState) {\n      if (evt.nativeEvent.pageX < 50) {\n        lastVideo();\n      } else {\n        nextVideo();\n      }\n    },\n    onPanResponderTerminate: function onPanResponderTerminate(evt, gestureState) {},\n    onShouldBlockNativeResponder: function onShouldBlockNativeResponder(evt, gestureState) {\n      return true;\n    }\n  });\n\n  useEffect(function () {\n    if (isFocused) {\n      setShouldPlay(true);\n    } else {\n      setShouldPlay(false);\n    }\n\n    initSegment();\n    Segment.track(\"Home Page - Start Videos\");\n    getNumberVideos({\n      variables: {\n        userId: userId\n      }\n    });\n    var yesterday = new Date(Date.now() - 86400000);\n    setTimeout(function () {\n      if (videoData && videoData.length > 0) {\n        setTimedOut(true);\n      }\n    }, 5000);\n  }, []);\n  useEffect(function () {\n    processVideos(props.data);\n  }, [props.data]);\n\n  function initSegment() {\n    var name, bio;\n    return _regeneratorRuntime.async(function initSegment$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(_retrieveName());\n\n          case 2:\n            name = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(_retrieveBio());\n\n          case 5:\n            bio = _context.sent;\n\n            if (name == '' || bio == '') {\n              getUserInfo({\n                variables: {\n                  userId: userId\n                }\n              });\n            } else {\n              setName(name);\n              Segment.identifyWithTraits(userId.toString(), {\n                'name': name,\n                'phoneNumber': phoneNumber\n              });\n              Segment.screen('Home');\n            }\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    if (props.lastPerformance != lastPerformance) {\n      setQuerying(false);\n    }\n  }, [lastPerformance]);\n  useEffect(function () {\n    setInitialized(false);\n    setUserIndex(0);\n    setVideoIndex(0);\n    queryVideos();\n  }, [groupPreference]);\n\n  function queryVideos() {\n    return _regeneratorRuntime.async(function queryVideos$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            getVideosLower({\n              variables: {\n                userId: userId,\n                limit: props.limit,\n                groupPreference: groupPreference,\n                lastPerformance: lastPerformance\n              }\n            });\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function processVideos(data) {\n    var users = data.usersLocation;\n\n    if (users.length > 0) {\n      if (!initialized) {\n        setInitialized(true);\n        setVideoData(users);\n        setCurrentUserId(users[0].id);\n        setCurrentName(users[0].firstName);\n        setCurrentCollege(users[0].college);\n        setCurrentCity(users[0].city);\n        setCurrentRegion(users[0].region);\n        initColors(users);\n        setMuxPlaybackId(users[0].userVideos[0].muxPlaybackId);\n        setLastPerformance(users[users.length - 1].performance);\n        setUserCount(users.length);\n        setCurrentUserVideoCount(users[0].userVideos.length);\n        setQuestionText(users[0].userVideos[0].videoQuestion.questionText);\n      } else {\n        var tempVideoData = [].concat(_toConsumableArray(videoData), _toConsumableArray(users));\n        setVideoData(tempVideoData);\n        setUserCount(userCount + users.length);\n        initColors(users);\n        setLastPerformance(users[users.length - 1].performance);\n      }\n    } else {\n      setQuerying(true);\n    }\n  }\n\n  useEffect(function () {\n    props.navigation.addListener('blur', function () {\n      setShouldPlay(false);\n    });\n    props.navigation.addListener('focus', function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setShouldPlay(true);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n  }, [props.navigation]);\n\n  var registerForPushNotificationsAsync = function registerForPushNotificationsAsync() {\n    var _await$Permissions$as, status, token;\n\n    return _regeneratorRuntime.async(function registerForPushNotificationsAsync$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!Constants.isDevice) {\n              _context4.next = 12;\n              break;\n            }\n\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.NOTIFICATIONS));\n\n          case 3:\n            _await$Permissions$as = _context4.sent;\n            status = _await$Permissions$as.status;\n            _context4.next = 7;\n            return _regeneratorRuntime.awrap(Notifications.getExpoPushTokenAsync());\n\n          case 7:\n            token = _context4.sent;\n            updatePushToken({\n              variables: {\n                userId: userId,\n                expoPushToken: token\n              }\n            });\n            setExpoPushToken(token);\n            _context4.next = 13;\n            break;\n\n          case 12:\n            alert('Must use physical device for Push Notifications');\n\n          case 13:\n            if ('android' in Constants.platform) {\n              Notifications.createChannelAndroidAsync('default', {\n                name: 'default',\n                sound: true,\n                priority: 'max',\n                vibrate: [0, 250, 250, 250]\n              });\n            }\n\n          case 14:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function sendLike(likedId, likerName) {\n    var res;\n    return _regeneratorRuntime.async(function sendLike$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(axios({\n              method: 'post',\n              url: 'https://gentle-brook-91508.herokuapp.com/push',\n              data: {\n                \"likerId\": userId,\n                \"likedId\": likedId,\n                \"likerName\": likerName\n              }\n            }));\n\n          case 2:\n            res = _context5.sent;\n\n          case 3:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function onLike() {\n    var likedId, likedIndex, likedVideoIndex, likerName, pushShown, _await$Permissions$ge, existingStatus;\n\n    return _regeneratorRuntime.async(function onLike$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            likedId = currentUserId;\n            likedIndex = userIndex;\n            likedVideoIndex = videoIndex;\n            likerName = name;\n\n            if (pushPopupShown) {\n              _context6.next = 16;\n              break;\n            }\n\n            _context6.next = 7;\n            return _regeneratorRuntime.awrap(_retrievePushShown());\n\n          case 7:\n            pushShown = _context6.sent;\n\n            if (!(!pushShown && Constants.isDevice)) {\n              _context6.next = 15;\n              break;\n            }\n\n            _context6.next = 11;\n            return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.NOTIFICATIONS));\n\n          case 11:\n            _await$Permissions$ge = _context6.sent;\n            existingStatus = _await$Permissions$ge.status;\n\n            if (existingStatus !== 'granted') {\n              setPushPopupVisible(true);\n              setPushName(likerName);\n            }\n\n            _storePushShown(true);\n\n          case 15:\n            setPushPopupShown(true);\n\n          case 16:\n            if (userIndex == 10 * (videoCount + 1) || userIndex == 10) {\n              setNoLikesLeft(true);\n            } else {\n              if (!likeColors[likedIndex].like) {\n                nextUser();\n                insertLike({\n                  variables: {\n                    likedId: likedId,\n                    likerId: userId,\n                    matched: false,\n                    dislike: false\n                  }\n                });\n\n                if (profileVideoCount > 0) {\n                  sendLike(likedId, likerName);\n                }\n\n                Segment.track(\"Like User\");\n              } else {\n                nextUser();\n              }\n            }\n\n            updateVideoLikes({\n              variables: {\n                id: videoId,\n                likes: videoData[likedIndex].userVideos[likedVideoIndex].likes + 1\n              }\n            });\n            updateVideoViews({\n              variables: {\n                id: videoId,\n                views: videoData[likedIndex].userVideos[likedVideoIndex].views + 1\n              }\n            });\n\n          case 19:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function onDislike() {\n    var dislikedId, dislikedIndex, dislikedVideoIndex;\n    return _regeneratorRuntime.async(function onDislike$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            dislikedId = currentUserId;\n            dislikedIndex = userIndex;\n            dislikedVideoIndex = videoIndex;\n\n            if (userIndex == 10 * (videoCount + 1)) {\n              setNoLikesLeft(true);\n            } else {\n              nextUser();\n\n              if (!dislikeColors[dislikedIndex].dislike && !likeColors[dislikedIndex].like) {\n                insertLike({\n                  variables: {\n                    likedId: dislikedId,\n                    likerId: userId,\n                    matched: false,\n                    dislike: true\n                  }\n                });\n                Segment.track(\"Dislike User\");\n              }\n\n              updateVideoDislikes({\n                variables: {\n                  id: videoId,\n                  dislikes: videoData[dislikedIndex].userVideos[dislikedVideoIndex].dislikes + 1\n                }\n              });\n              updateVideoViews({\n                variables: {\n                  id: videoId,\n                  views: videoData[dislikedIndex].userVideos[dislikedVideoIndex].views + 1\n                }\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function initColors(users) {\n    var newLikeColors = users.map(function (user) {\n      if (user.likesByLikedId.length == 0) {\n        return {\n          like: false,\n          color: '#eee'\n        };\n      } else {\n        var dislike = user.likesByLikedId[0].dislike;\n\n        if (dislike) {\n          return {\n            like: false,\n            color: '#eee'\n          };\n        } else {\n          return {\n            like: true,\n            color: '#734f96'\n          };\n        }\n      }\n    });\n    setLikeColors([].concat(_toConsumableArray(likeColors), _toConsumableArray(newLikeColors)));\n    var newDislikeColors = users.map(function (user) {\n      if (user.likesByLikedId.length == 0) {\n        return {\n          dislike: false,\n          color: '#eee'\n        };\n      } else {\n        var dislike = user.likesByLikedId[0].dislike;\n\n        if (dislike) {\n          return {\n            dislike: true,\n            color: '#734f96'\n          };\n        } else {\n          return {\n            dislike: false,\n            color: colors.secondaryBlack\n          };\n        }\n      }\n    });\n    setDislikeColors([].concat(_toConsumableArray(dislikeColors), _toConsumableArray(newDislikeColors)));\n  }\n\n  useEffect(function () {\n    if (videoData && videoData.length > 0) {\n      setCurrentUserId(videoData[userIndex].id);\n      setCurrentName(videoData[userIndex].firstName);\n      setCurrentCollege(videoData[userIndex].college);\n      setCurrentCity(videoData[userIndex].city);\n      setCurrentRegion(videoData[userIndex].region);\n      setMuxPlaybackId(videoData[userIndex].userVideos[videoIndex].muxPlaybackId);\n      setUserCount(videoData.length);\n      setCurrentUserVideoCount(videoData[userIndex].userVideos.length);\n      setQuestionText(videoData[userIndex].userVideos[videoIndex].videoQuestion.questionText);\n      setFlags(videoData[userIndex].userVideos[videoIndex].flags);\n      setVideoId(videoData[userIndex].userVideos[videoIndex].id);\n    }\n\n    if (videoData && userIndex + props.limit > videoData.length && !querying) {\n      setQuerying(true);\n      queryVideos();\n    }\n  }, [videoIndex, userIndex, videoData]);\n\n  var nextVideo = function nextVideo() {\n    updateVideoViews({\n      variables: {\n        id: videoId,\n        views: videoData[userIndex].userVideos[videoIndex].views + 1\n      }\n    });\n\n    if (currentUserVideoCount == 1) {} else if (videoIndex + 1 !== currentUserVideoCount) {\n      setVideoIndex(videoIndex + 1);\n      setCurrentProgress(0);\n    } else {\n      setVideoIndex(0);\n      setCurrentProgress(0);\n    }\n\n    Segment.track(\"Home - Next Video\");\n  };\n\n  var lastVideo = function lastVideo() {\n    if (currentUserVideoCount == 1) {} else if (videoIndex == 0) {\n      setVideoIndex(currentUserVideoCount - 1);\n      setCurrentProgress(0);\n    } else {\n      setVideoIndex(videoIndex - 1);\n      setCurrentProgress(0);\n    }\n\n    Segment.track(\"Home - Last Video\");\n  };\n\n  var lastUser = function lastUser() {\n    setCurrentProgress(0);\n    setVideoIndex(0);\n\n    if (userIndex !== 0) {\n      setUserIndex(userIndex - 1);\n    }\n  };\n\n  var nextUser = function nextUser() {\n    if (userIndex !== userCount - 1) {\n      setUserIndex(userIndex + 1);\n      setCurrentProgress(0);\n      setVideoIndex(0);\n    } else {\n      if (userIndex == 0) {\n        setQuerying(true);\n        queryVideos();\n      } else {\n        setNoMoreVideos(true);\n        Segment.track(\"Home - Out of Users\");\n      }\n    }\n  };\n\n  function moreOptions() {\n    setOptionsModalVisible(true);\n  }\n\n  function goToAddVideo() {\n    setAddPopupVisible(false);\n    setNoLikesLeft(false);\n    props.navigation.navigate('Add');\n  }\n\n  var _useState65 = useState(0),\n      _useState66 = _slicedToArray(_useState65, 2),\n      currentProgress = _useState66[0],\n      setCurrentProgress = _useState66[1];\n\n  var progressBarWidth = function progressBarWidth() {\n    var windowWidth = Dimensions.get('window').width;\n    return windowWidth / currentUserVideoCount;\n  };\n\n  function ProgressBarsContainer() {\n    var width = progressBarWidth();\n    return React.createElement(View, {\n      style: homeStyles.progressBarContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }\n    }, initAnimatedBars(width));\n  }\n\n  function initAnimatedBars(width) {\n    var animatedBars = [];\n\n    for (var i = 0; i < currentUserVideoCount; i++) {\n      if (i < videoIndex) {\n        animatedBars.push(React.createElement(ProgressBar, {\n          progress: 1,\n          width: width,\n          key: i,\n          color: \"#734f96\",\n          unfilledColor: \"#E6E6FA\",\n          borderColor: \"#000\",\n          borderRadius: 1,\n          height: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 11\n          }\n        }));\n      } else if (i == videoIndex) {\n        animatedBars.push(React.createElement(ProgressBar, {\n          key: i,\n          progress: currentProgress,\n          width: width,\n          color: \"#734f96\",\n          unfilledColor: \"#E6E6FA\",\n          borderColor: \"#000\",\n          borderRadius: 1,\n          height: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 11\n          }\n        }));\n      } else {\n        animatedBars.push(React.createElement(ProgressBar, {\n          progress: 0,\n          width: width,\n          key: i,\n          color: \"#734f96\",\n          unfilledColor: \"#E6E6FA\",\n          borderColor: \"#000\",\n          borderRadius: 1,\n          height: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 11\n          }\n        }));\n      }\n    }\n\n    return animatedBars;\n  }\n\n  var _onPlaybackStatusUpdate = function _onPlaybackStatusUpdate(playbackStatus) {\n    if (playbackStatus.positionMillis && playbackStatus.durationMillis) {\n      var progress = playbackStatus.positionMillis / playbackStatus.durationMillis;\n      setCurrentProgress(progress);\n\n      if (playbackStatus.positionMillis == playbackStatus.durationMillis) {\n        nextVideo();\n      }\n    } else {\n      setCurrentProgress(0);\n    }\n  };\n\n  function UserInfo() {\n    function DistanceSeparator() {\n      if (currentCity != null || currentRegion != null) {\n        return React.createElement(Text, {\n          style: styles.separatorText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 11\n          }\n        }, \"\\u2B24\");\n      } else {\n        return null;\n      }\n    }\n\n    function Distance() {\n      if (currentCity != null || currentRegion != null) {\n        return React.createElement(Text, {\n          style: styles.locationText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 11\n          }\n        }, currentCity, \", \", currentRegion);\n      } else {\n        return null;\n      }\n    }\n\n    if (currentName) {\n      if (currentCollege) {\n        return React.createElement(View, {\n          style: homeStyles.userInfoContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }\n        }, React.createElement(View, {\n          style: {\n            flexDirection: 'row',\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 15\n          }\n        }, React.createElement(Text, {\n          style: styles.currentNameText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 17\n          }\n        }, currentName), React.createElement(DistanceSeparator, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 17\n          }\n        }), React.createElement(Distance, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 17\n          }\n        })), React.createElement(Text, {\n          style: styles.locationText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }\n        }, currentCollege));\n      } else {\n        return React.createElement(View, {\n          style: homeStyles.userInfoContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 11\n          }\n        }, React.createElement(View, {\n          style: {\n            flexDirection: 'row',\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          style: styles.currentNameText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 15\n          }\n        }, currentName), React.createElement(DistanceSeparator, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 15\n          }\n        }), React.createElement(Distance, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }\n        })));\n      }\n    } else {\n      return null;\n    }\n  }\n\n  var _useState67 = useState('#eee'),\n      _useState68 = _slicedToArray(_useState67, 2),\n      dislikeColor = _useState68[0],\n      setDislikeColor = _useState68[1];\n\n  var _useState69 = useState('#eee'),\n      _useState70 = _slicedToArray(_useState69, 2),\n      likeColor = _useState70[0],\n      setLikeColor = _useState70[1];\n\n  useEffect(function () {\n    setDislikeColor(dislikeColors[userIndex] ? dislikeColors[userIndex].color : '#eee');\n    setLikeColor(likeColors[userIndex] ? likeColors[userIndex].color : '#eee');\n  }, [userIndex, dislikeColors, likeColors]);\n\n  if (initialized && !noMoreVideos) {\n    if ('ios' in Constants.platform) {\n      return React.createElement(View, {\n        style: styles.viewBackground,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 9\n        }\n      }, React.createElement(View, _extends({\n        style: styles.videosView\n      }, _panResponder.panHandlers, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 11\n        }\n      }), React.createElement(MultipleVideos, {\n        key: renderedUserIndex1,\n        shouldPlay: shouldPlay,\n        playbackObject: playbackObject,\n        _onPlaybackStatusUpdate: _onPlaybackStatusUpdate,\n        videoData: videoData,\n        userIndex: userIndex,\n        videoIndex: videoIndex,\n        renderedUserIndex: renderedUserIndex1,\n        userCount: userCount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }\n      }), React.createElement(MultipleVideos, {\n        key: renderedUserIndex2,\n        shouldPlay: shouldPlay,\n        playbackObject: playbackObject,\n        _onPlaybackStatusUpdate: _onPlaybackStatusUpdate,\n        videoData: videoData,\n        userIndex: userIndex,\n        videoIndex: videoIndex,\n        renderedUserIndex: renderedUserIndex2,\n        userCount: userCount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 13\n        }\n      }), React.createElement(ProgressBarsContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }\n      }), React.createElement(BlurView, {\n        tint: \"dark\",\n        intensity: 40,\n        style: homeStyles.questionContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.questionText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 15\n        }\n      }, questionText)), React.createElement(UserInfo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.heartView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: onDislike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 13\n        }\n      }, React.createElement(Entypo, {\n        name: \"cross\",\n        size: 65,\n        color: dislikeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: onLike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 13\n        }\n      }, React.createElement(Ionicons, {\n        name: \"md-heart\",\n        size: 65,\n        color: likeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 15\n        }\n      }))), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, StyleSheet.absoluteFill), {}, {\n          height: '15%',\n          alignItems: 'center',\n          justifyContent: 'flex-end',\n          paddingRight: 15,\n          flexDirection: 'row'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: lastUser,\n        style: {\n          paddingRight: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 13\n        }\n      }, React.createElement(Entypo, {\n        name: \"back\",\n        size: 30,\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: moreOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-more\",\n        size: 30,\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 15\n        }\n      }))), React.createElement(OptionsModal, {\n        visible: optionsModalVisible,\n        setVisible: setOptionsModalVisible,\n        videoId: videoId,\n        flags: flags,\n        userId: userId,\n        currentUserId: currentUserId,\n        videoData: videoData,\n        setVideoData: setVideoData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 11\n        }\n      }), React.createElement(AddVideoPopup, {\n        visible: addPopupVisible,\n        setVisible: setAddPopupVisible,\n        goToAddVideo: goToAddVideo,\n        name: currentName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 11\n        }\n      }), React.createElement(PushPopup, {\n        visible: pushPopupVisible,\n        setVisible: setPushPopupVisible,\n        registerForPushNotificationsAsync: registerForPushNotificationsAsync,\n        name: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 11\n        }\n      }), React.createElement(NoLikesPopup, {\n        visible: noLikesLeft,\n        setVisible: setNoLikesLeft,\n        goToAddVideo: goToAddVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        style: styles.viewBackground,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 9\n        }\n      }, React.createElement(View, _extends({\n        style: styles.videosView\n      }, _panResponder.panHandlers, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 11\n        }\n      }), React.createElement(SingleVideo, {\n        shouldPlay: shouldPlay,\n        source: 'https://stream.mux.com/' + muxPlaybackId + '.m3u8',\n        key: 'https://stream.mux.com/' + muxPlaybackId + '.m3u8',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 13\n        }\n      }), React.createElement(ProgressBarsContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 13\n        }\n      }), React.createElement(BlurView, {\n        tint: \"dark\",\n        intensity: 20,\n        style: homeStyles.questionContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.questionText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 15\n        }\n      }, questionText)), React.createElement(UserInfo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.heartView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: onDislike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 13\n        }\n      }, React.createElement(Entypo, {\n        name: \"cross\",\n        size: 65,\n        color: dislikeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: onLike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 13\n        }\n      }, React.createElement(Ionicons, {\n        name: \"md-heart\",\n        size: 65,\n        color: likeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 15\n        }\n      }))), React.createElement(View, {\n        style: _objectSpread(_objectSpread({}, StyleSheet.absoluteFill), {}, {\n          height: '15%',\n          alignItems: 'center',\n          justifyContent: 'flex-end',\n          paddingRight: 15,\n          flexDirection: 'row'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: lastUser,\n        style: {\n          paddingRight: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 13\n        }\n      }, React.createElement(Entypo, {\n        name: \"back\",\n        size: 30,\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: moreOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 13\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-more\",\n        size: 30,\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 15\n        }\n      }))), React.createElement(OptionsModal, {\n        visible: optionsModalVisible,\n        setVisible: setOptionsModalVisible,\n        videoId: videoId,\n        flags: flags,\n        userId: userId,\n        currentUserId: currentUserId,\n        videoData: videoData,\n        setVideoData: setVideoData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }\n      }), React.createElement(AddVideoPopup, {\n        visible: addPopupVisible,\n        setVisible: setAddPopupVisible,\n        goToAddVideo: goToAddVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 11\n        }\n      }), React.createElement(PushPopup, {\n        visible: pushPopupVisible,\n        setVisible: setPushPopupVisible,\n        registerForPushNotificationsAsync: registerForPushNotificationsAsync,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 11\n        }\n      }), React.createElement(NoLikesPopup, {\n        visible: noLikesLeft,\n        setVisible: setNoLikesLeft,\n        goToAddVideo: goToAddVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 11\n        }\n      }));\n    }\n  } else {\n    if (noMoreVideos == true) {\n      return React.createElement(View, {\n        style: {\n          height: '100%',\n          justifyContent: 'center',\n          alignItems: 'center',\n          backgroundColor: colors.primaryBlack\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          height: '40%',\n          width: '85%',\n          backgroundColor: colors.primaryPurple,\n          borderRadius: 5,\n          padding: 10,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 22,\n          fontWeight: 'bold',\n          paddingTop: 15,\n          paddingBottom: 5,\n          color: colors.primaryWhite\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 15\n        }\n      }, \"Out of users!\"), React.createElement(Text, {\n        style: {\n          textAlign: 'center',\n          fontSize: 20,\n          fontWeight: '300',\n          paddingHorizontal: 5,\n          color: colors.primaryWhite\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 15\n        }\n      }, \"Come back tomorrow for more users :)\")));\n    } else {\n      return React.createElement(View, {\n        style: styles.badInternetView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 9\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"small\",\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n}\nvar styles = StyleSheet.create({\n  currentNameText: {\n    color: '#eee'\n  },\n  separatorText: {\n    color: '#eee',\n    fontSize: 5,\n    paddingLeft: 5\n  },\n  locationText: {\n    color: '#eee',\n    paddingLeft: 5\n  },\n  viewBackground: {\n    flex: 1,\n    backgroundColor: '#eee'\n  },\n  videosView: {\n    flex: 9,\n    backgroundColor: '#000'\n  },\n  questionText: {\n    fontSize: 18,\n    color: \"#eee\",\n    padding: 15,\n    paddingTop: 20,\n    textAlign: 'center'\n  },\n  heartView: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    alignItems: 'center',\n    paddingBottom: 20,\n    flexDirection: 'row',\n    justifyContent: 'space-around'\n  },\n  badInternetView: {\n    backgroundColor: '#000',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1\n  },\n  reloadText: {\n    color: '#eee',\n    fontSize: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 5\n  },\n  addVideoContainer: {\n    backgroundColor: colors.primaryWhite,\n    borderRadius: 5,\n    width: 250,\n    height: 50,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  addVideoText: {\n    fontSize: 17,\n    color: colors.primaryPurple,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"sources":["/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/homePage/HomeContents.tsx"],"names":["React","useState","useEffect","useContext","useRef","useMemo","homeStyles","BlurView","Ionicons","Entypo","useMutation","useLazyQuery","INSERT_LIKE","GET_VIDEOS","GET_NUMBER_VIDEOS","UPDATE_PUSH_TOKEN","GET_USER_INFO","UPDATE_VIDEO_LIKES","UPDATE_VIDEO_VIEWS","UPDATE_VIDEO_DISLIKES","OptionsModal","UserIdContext","Segment","_retrieveName","_retrievePushShown","_storePushShown","_storeName","_storeBio","_retrieveBio","AddVideoPopup","NoLikesPopup","PushPopup","MultipleVideos","useDoormanUser","Notifications","Constants","Permissions","axios","SingleVideo","ProgressBar","colors","VideoCountContext","useIsFocused","HomeContents","props","isFocused","uid","phoneNumber","videoData","setVideoData","questionText","setQuestionText","shouldPlay","setShouldPlay","userCount","setUserCount","currentUserVideoCount","setCurrentUserVideoCount","currentUserId","setCurrentUserId","currentName","setCurrentName","currentCollege","setCurrentCollege","currentCity","setCurrentCity","currentRegion","setCurrentRegion","userId","setUserId","name","setName","userIndex","setUserIndex","videoIndex","setVideoIndex","flags","setFlags","videoId","setVideoId","querying","setQuerying","initialized","setInitialized","muxPlaybackId","setMuxPlaybackId","renderedUserIndex1","renderedUserIndex2","profileVideoCount","setProfileVideoCount","addPopupVisible","setAddPopupVisible","expoPushToken","setExpoPushToken","pushPopupShown","setPushPopupShown","pushPopupVisible","setPushPopupVisible","pushName","setPushName","likeColors","setLikeColors","dislikeColors","setDislikeColors","insertLike","insertLikeData","updatePushToken","updatePushTokenData","updateVideoLikes","updateVideoLikesData","updateVideoDislikes","updateVideoDislikesData","updateVideoViews","updateVideoViewsData","optionsModalVisible","setOptionsModalVisible","playbackObject","timedOut","setTimedOut","noMoreVideos","setNoMoreVideos","noLikesLeft","setNoLikesLeft","lastPerformance","setLastPerformance","groupPreference","setGroupPreference","videoCount","setVideoCount","onCompleted","videosLower","processVideos","getVideosLower","data","numberVideos","count","videos_aggregate","aggregate","getNumberVideos","userInfo","users","firstName","bio","identifyWithTraits","toString","screen","getUserInfo","_panResponder","PanResponder","create","onStartShouldSetPanResponder","evt","gestureState","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderGrant","onPanResponderMove","onPanResponderTerminationRequest","onPanResponderRelease","nativeEvent","pageX","lastVideo","nextVideo","onPanResponderTerminate","onShouldBlockNativeResponder","initSegment","track","variables","yesterday","Date","now","setTimeout","length","queryVideos","limit","usersLocation","id","college","city","region","initColors","userVideos","performance","videoQuestion","tempVideoData","navigation","addListener","registerForPushNotificationsAsync","isDevice","askAsync","NOTIFICATIONS","status","getExpoPushTokenAsync","token","alert","platform","createChannelAndroidAsync","sound","priority","vibrate","sendLike","likedId","likerName","method","url","res","onLike","likedIndex","likedVideoIndex","pushShown","getAsync","existingStatus","like","nextUser","likerId","matched","dislike","likes","views","onDislike","dislikedId","dislikedIndex","dislikedVideoIndex","dislikes","newLikeColors","map","user","likesByLikedId","color","newDislikeColors","secondaryBlack","setCurrentProgress","lastUser","moreOptions","goToAddVideo","navigate","currentProgress","progressBarWidth","windowWidth","Dimensions","get","width","ProgressBarsContainer","progressBarContainer","initAnimatedBars","animatedBars","i","push","_onPlaybackStatusUpdate","playbackStatus","positionMillis","durationMillis","progress","UserInfo","DistanceSeparator","styles","separatorText","Distance","locationText","userInfoContainer","flexDirection","alignItems","currentNameText","dislikeColor","setDislikeColor","likeColor","setLikeColor","viewBackground","videosView","panHandlers","questionContainer","heartView","StyleSheet","absoluteFill","height","justifyContent","paddingRight","backgroundColor","primaryBlack","primaryPurple","borderRadius","padding","fontSize","fontWeight","paddingTop","paddingBottom","primaryWhite","textAlign","paddingHorizontal","badInternetView","paddingLeft","flex","position","left","right","bottom","reloadText","paddingVertical","addVideoContainer","addVideoText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useRef, useMemo } from 'react';\nimport { Text, View, ActivityIndicator, StyleSheet } from 'react-native';\nimport { homeStyles } from '../../styles/homeStyles';\nimport { BlurView } from 'expo-blur';\nimport { Ionicons, Entypo, Feather } from '@expo/vector-icons'\nimport { useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport { INSERT_LIKE, GET_LIKE, client, GET_VIDEOS, INSERT_USER, UPDATE_LIKE, GET_NUMBER_VIDEOS, UPDATE_PUSH_TOKEN, GET_USER_INFO, UPDATE_VIDEO_LIKES, UPDATE_VIDEO_VIEWS, GET_GENDER_INTEREST, GET_QUESTIONS, UPDATE_VIDEO_DISLIKES, GET_LIKE_COUNT } from '../../utils/graphql/GraphqlClient';\nimport OptionsModal from './OptionsModal'; \nimport { UserIdContext } from '../../utils/context/UserIdContext'\nimport * as Segment from 'expo-analytics-segment';\nimport { _retrieveUserId, _storeUserId, _retrieveDoormanUid, _storeDoormanUid, _retrieveLatitude, _retrieveLongitude, _retrieveName, _retrievePushShown, _storePushShown, _storeName, _storeBio, _retrieveBio, _storeGenderInterest, _retrieveGenderGroup} from '../../utils/asyncStorage'; \nimport AddVideoPopup from '../modals/AddVideoPopup'; \nimport NoLikesPopup from '../modals/NoLikesPopup'; \nimport PushPopup from '../modals/PushPopup'; \nimport { PanResponder } from 'react-native'; \nimport MultipleVideos from '../videosPage/MultipleVideos'; \nimport { useDoormanUser } from 'react-native-doorman'\nimport { Notifications } from 'expo';\nimport Constants from 'expo-constants';\nimport * as Permissions from 'expo-permissions';\nimport axios from 'axios';\nimport * as Network from 'expo-network';\nimport { TouchableOpacity } from 'react-native';\nimport SingleVideo from '../videosPage/SingleVideo';\nimport ProgressBar from 'react-native-progress/Bar'\nimport { Dimensions } from 'react-native';\nimport { getDistance } from 'geolib';\nimport { colors } from '../../styles/colors';\nimport { VideoCountContext } from '../../utils/context/VideoCountContext';\nimport { useIsFocused } from '@react-navigation/native';\n \nexport default function HomeContents(props) {\n  const isFocused = useIsFocused();\n  const { uid, phoneNumber } = useDoormanUser();\n  const [videoData, setVideoData] = useState(null); \n  const [questionText, setQuestionText] = useState(''); \n  const [shouldPlay, setShouldPlay] = useState(true); \n\n  const [userCount, setUserCount] = useState(0); \n  // const [upperUserCount, setUpperUserCount] = useState(0); \n  // const [lowerUserCount, setLowerUserCount] = useState(0); \n  const [currentUserVideoCount, setCurrentUserVideoCount] = useState(0); \n  const [currentUserId, setCurrentUserId] = useState(0); \n\n  const [currentName, setCurrentName] = useState('');\n\n  const [currentCollege, setCurrentCollege] = useState(''); \n  const [currentCity, setCurrentCity] = useState(null);\n  const [currentRegion, setCurrentRegion] = useState(null); \n  \n  const [userId, setUserId] = useContext(UserIdContext);\n  const [name, setName] = useState(''); \n\n  const [userIndex, setUserIndex] = useState(0); \n  const [videoIndex, setVideoIndex] = useState(0);\n  const [flags, setFlags] = useState(0); \n  const [videoId, setVideoId] = useState(0); \n  const [querying, setQuerying] = useState(true); \n  const [initialized, setInitialized] = useState(false); \n  const [muxPlaybackId, setMuxPlaybackId] = useState(''); \n\n  const renderedUserIndex1 = useMemo(() => userIndex % 2 === 0 ? userIndex : userIndex + 1, [userIndex]);\n  const renderedUserIndex2 = useMemo(() => userIndex % 2 === 1 ? userIndex : userIndex + 1, [userIndex]); \n\n  const [profileVideoCount, setProfileVideoCount] = useState(null); \n  const [addPopupVisible, setAddPopupVisible] = useState(false); \n\n  const [expoPushToken, setExpoPushToken] = useState(''); \n  const [pushPopupShown, setPushPopupShown] = useState(false); \n  const [pushPopupVisible, setPushPopupVisible] = useState(false);\n  const [pushName, setPushName] = useState(''); \n\n  const [likeColors, setLikeColors] = useState([]);\n  const [dislikeColors, setDislikeColors] = useState([]);\n\n  const [insertLike, { insertLikeData }] = useMutation(INSERT_LIKE);\n  const [updatePushToken, { updatePushTokenData }] = useMutation(UPDATE_PUSH_TOKEN);\n  const [updateVideoLikes, { updateVideoLikesData }] = useMutation(UPDATE_VIDEO_LIKES);\n  const [updateVideoDislikes, { updateVideoDislikesData }] = useMutation(UPDATE_VIDEO_DISLIKES);\n  const [updateVideoViews, { updateVideoViewsData }] = useMutation(UPDATE_VIDEO_VIEWS);\n\n  const [optionsModalVisible, setOptionsModalVisible] = useState(false); \n\n  let playbackObject = useRef(null); \n\n  const [timedOut, setTimedOut] = useState(false);\n  const [noMoreVideos, setNoMoreVideos] = useState(false); \n  const [noLikesLeft, setNoLikesLeft] = useState(false); \n  // const [lastLoaded, setLastLoaded] = useState(props.lastLoaded); \n  const [lastPerformance, setLastPerformance] = useState(props.lastPerformance); \n  const [groupPreference, setGroupPreference] = useState(props.groupPreference); \n  const [videoCount, setVideoCount] = useContext(VideoCountContext); \n\n  const [getVideosLower, { data: videosLower }] = useLazyQuery(GET_VIDEOS, \n  { \n    onCompleted: (videosLower) => { \n      processVideos(videosLower) \n    } \n  }); \n\n  const [getNumberVideos, { data: numberVideos }] = useLazyQuery(GET_NUMBER_VIDEOS,\n  {\n    onCompleted: (numberVideos) => {\n      const count = numberVideos.videos_aggregate.aggregate.count;\n      setProfileVideoCount(count); \n    }\n  });\n\n  const [getUserInfo, { data: userInfo }] = useLazyQuery(GET_USER_INFO, \n  {\n    onCompleted: (userInfo) => { \n      const users = userInfo.users; \n      \n      if(users[0].firstName){\n        setName(users[0].firstName); \n        _storeName(users[0].firstName); \n      };\n\n      if(users[0].bio){\n        _storeBio(users[0].bio); \n      }\n\n      Segment.identifyWithTraits(userId.toString(), {'name' : name, 'phoneNumber' : phoneNumber});\n      Segment.screen('Home');   \n    } \n  });\n\n  const _panResponder = PanResponder.create({\n    onStartShouldSetPanResponder: (evt, gestureState) => true,\n    onStartShouldSetPanResponderCapture: (evt, gestureState) => true,\n    onMoveShouldSetPanResponder: (evt, gestureState) => {},\n    onMoveShouldSetPanResponderCapture: (evt, gestureState) => {},\n    onPanResponderGrant: (evt, gestureState) => {},\n    onPanResponderMove: (evt, gestureState) => {},\n    onPanResponderTerminationRequest: (evt, gestureState) => true,\n    onPanResponderRelease: (evt, gestureState) => {\n\n        if(evt.nativeEvent.pageX < 50){\n          lastVideo(); \n        } else {\n          nextVideo(); \n        }\n    },\n    onPanResponderTerminate: (evt, gestureState) => {},\n    onShouldBlockNativeResponder: (evt, gestureState) => true\n  });\n\n  useEffect(() => {\n    if(isFocused){\n      setShouldPlay(true); \n    } else {\n      setShouldPlay(false); \n    }\n\n    initSegment(); \n    Segment.track(\"Home Page - Start Videos\"); \n    // networkConnected(); \n    getNumberVideos({variables: { userId }}); \n\n    let yesterday = new Date(Date.now() - 86400000); \n    // getLikeCount({ variables: { likerId: userId, since: yesterday }});\n    setTimeout(() => {\n      if(videoData && videoData.length > 0){\n        setTimedOut(true);\n      }\n    }, 5000); \n\n  }, []);\n\n  useEffect(() => {\n    processVideos(props.data); \n  }, [props.data]);\n\n  // async function networkConnected(){\n  //   const networkInfo = await Network.getNetworkStateAsync(); \n  //   setConnectedInternet(networkInfo.isConnected); \n  // }\n\n\n  async function initSegment() {\n    let name = await _retrieveName(); \n    let bio = await _retrieveBio(); \n    if(name == '' || bio == ''){\n      getUserInfo({ variables: { userId }}); \n    } else {\n      setName(name); \n      Segment.identifyWithTraits(userId.toString(), {'name' : name, 'phoneNumber' : phoneNumber});\n      Segment.screen('Home'); \n    }\n  }\n\n  // useEffect(() => {\n  //   if(props.lastLoaded != lastLoaded){\n  //     setQuerying(false); \n  //   }\n  // }, [lastLoaded]);\n  \n  useEffect(() => {\n    if(props.lastPerformance != lastPerformance){\n      setQuerying(false); \n    }\n  }, [lastPerformance]); \n\n  useEffect(() => {\n    setInitialized(false); \n    setUserIndex(0);\n    setVideoIndex(0); \n    queryVideos(); \n  }, [groupPreference]);\n\n\n  async function queryVideos(){\n\n    getVideosLower({ variables: { userId, limit: props.limit, groupPreference, lastPerformance } })\n  }\n\n  function processVideos(data){\n    \n    const users = data.usersLocation; \n\n    if (users.length > 0){\n      if(!initialized){\n        setInitialized(true); \n        setVideoData(users);\n        setCurrentUserId(users[0].id); \n        setCurrentName(users[0].firstName);\n        setCurrentCollege(users[0].college);\n        setCurrentCity(users[0].city);\n        setCurrentRegion(users[0].region); \n        initColors(users); \n\n        setMuxPlaybackId(users[0].userVideos[0].muxPlaybackId); \n        // setLastLoaded(users[users.length - 1].lastUploaded); \n        setLastPerformance(users[users.length - 1].performance); \n        setUserCount(users.length); \n        setCurrentUserVideoCount(users[0].userVideos.length);\n        setQuestionText(users[0].userVideos[0].videoQuestion.questionText);  \n      } else {\n        const tempVideoData = [...videoData, ...users];\n        setVideoData(tempVideoData);\n        setUserCount(userCount + users.length); \n        initColors(users); \n        setLastPerformance(users[users.length - 1].performance); \n        // setLastLoaded(users[users.length - 1].lastUploaded); \n      }\n    } else {\n      // Stops any further querying\n      setQuerying(true);  \n    }\n  }\n\n  // changes in tabs will affect shouldPlay \n  useEffect(() => {\n    props.navigation.addListener('blur', () => {\n      setShouldPlay(false);\n    });\n\n    props.navigation.addListener('focus', async () => {\n      setShouldPlay(true);\n    });  \n  }, [props.navigation]);\n\n  const registerForPushNotificationsAsync = async () => {\n    if (Constants.isDevice) {\n      const { status } = await Permissions.askAsync(Permissions.NOTIFICATIONS);\n      const token = await Notifications.getExpoPushTokenAsync();\n      updatePushToken({ variables: { userId, expoPushToken: token } })\n      setExpoPushToken(token); \n    } else {\n      alert('Must use physical device for Push Notifications');\n    }\n\n    if ('android' in Constants.platform) {\n      Notifications.createChannelAndroidAsync('default', {\n        name: 'default',\n        sound: true,\n        priority: 'max',\n        vibrate: [0, 250, 250, 250],\n      });\n    }\n  };\n\n  async function sendLike(likedId, likerName) {\n    let res = await axios({\n      method: 'post', \n      url: 'https://gentle-brook-91508.herokuapp.com/push',\n      data: { \"likerId\" : userId, \"likedId\" : likedId, \"likerName\" : likerName }\n    }); \n  }\n\n  async function onLike() { \n\n    const likedId = currentUserId; \n    const likedIndex = userIndex; \n    const likedVideoIndex = videoIndex; \n    const likerName = name; \n\n    // if(profileVideoCount == 0 && userIndex % 5 == 3){\n    //   setAddPopupVisible(true); \n    // }\n\n    if(!pushPopupShown){\n      const pushShown = await _retrievePushShown(); \n      if (!pushShown && Constants.isDevice) {\n        const { status: existingStatus } = await Permissions.getAsync(Permissions.NOTIFICATIONS);\n        if(existingStatus !== 'granted'){\n          setPushPopupVisible(true); \n          setPushName(likerName); \n        }        \n        _storePushShown(true); \n      }\n      setPushPopupShown(true); \n    }\n\n    if(userIndex == 10 * (videoCount + 1) || userIndex == 10){\n      setNoLikesLeft(true);\n    } else {\n      if(!likeColors[likedIndex].like){  \n        nextUser(); \n        insertLike({ variables: { likedId: likedId, likerId: userId, matched: false, dislike: false }});\n        if(profileVideoCount > 0){\n          sendLike(likedId, likerName);\n        }\n        Segment.track(\"Like User\"); \n      } else {\n        nextUser(); \n      }\n    }\n    updateVideoLikes({ variables: { id : videoId, likes: videoData[likedIndex].userVideos[likedVideoIndex].likes + 1 }});\n    updateVideoViews({ variables: { id : videoId, views: videoData[likedIndex].userVideos[likedVideoIndex].views + 1 }});      \n  }\n\n  async function onDislike() { \n\n    const dislikedId = currentUserId; \n    const dislikedIndex = userIndex; \n    const dislikedVideoIndex = videoIndex; \n\n    if(userIndex == 10 * (videoCount + 1)){\n      setNoLikesLeft(true);\n    } else {\n      nextUser();\n\n      if(!dislikeColors[dislikedIndex].dislike && !likeColors[dislikedIndex].like){\n        // setLikeCount(likeCount + 1); \n        insertLike({ variables: { likedId: dislikedId, likerId: userId, matched: false, dislike: true }});\n        Segment.track(\"Dislike User\"); \n      }\n      updateVideoDislikes({ variables: { id : videoId, dislikes: videoData[dislikedIndex].userVideos[dislikedVideoIndex].dislikes + 1 }});\n      updateVideoViews({ variables: { id : videoId, views: videoData[dislikedIndex].userVideos[dislikedVideoIndex].views + 1 }});  \n    }\n\n  }\n\n  function initColors(users){\n    const newLikeColors = users.map(user => {\n      if(user.likesByLikedId.length == 0){\n        return { like: false, color: '#eee' }\n      } else {\n        const dislike = user.likesByLikedId[0].dislike;\n        if(dislike){\n          return { like: false, color: '#eee' }\n        } else {\n          return { like: true, color: '#734f96' }; \n        }\n      }\n    }); \n\n    setLikeColors([...likeColors, ...newLikeColors]); \n\n    const newDislikeColors = users.map(user => {\n      if(user.likesByLikedId.length == 0){\n        return { dislike: false, color: '#eee' }\n      } else {\n        const dislike = user.likesByLikedId[0].dislike;\n        if(dislike){\n          return { dislike: true, color: '#734f96' }\n        } else {\n          return { dislike: false, color: colors.secondaryBlack }; \n        }\n      }\n    }); \n\n    setDislikeColors([...dislikeColors, ...newDislikeColors]);\n  }\n\n  // set new muxPlaybackId and questionText with any update to videoIndex, userIndex or videoData\n  useEffect(() => {\n    if(videoData && videoData.length > 0){\n      setCurrentUserId(videoData[userIndex].id); \n      setCurrentName(videoData[userIndex].firstName);\n      setCurrentCollege(videoData[userIndex].college); \n      setCurrentCity(videoData[userIndex].city);\n      setCurrentRegion(videoData[userIndex].region); \n\n      setMuxPlaybackId(videoData[userIndex].userVideos[videoIndex].muxPlaybackId); \n \n      setUserCount(videoData.length); \n      setCurrentUserVideoCount(videoData[userIndex].userVideos.length);\n      setQuestionText(videoData[userIndex].userVideos[videoIndex].videoQuestion.questionText);\n      setFlags(videoData[userIndex].userVideos[videoIndex].flags); \n      setVideoId(videoData[userIndex].userVideos[videoIndex].id); \n    }\n\n    if(videoData && userIndex + props.limit > videoData.length && !querying){\n      setQuerying(true); \n      queryVideos(); \n    }\n\n  }, [videoIndex, userIndex, videoData])\n\n  const nextVideo = () => {\n    updateVideoViews({ variables: { id : videoId, views: videoData[userIndex].userVideos[videoIndex].views + 1 }});  \n     if(currentUserVideoCount == 1){\n      // do nothing\n    } else if(videoIndex + 1 !== currentUserVideoCount){\n      setVideoIndex(videoIndex + 1); \n      setCurrentProgress(0); \n    } else {\n      setVideoIndex(0); \n      setCurrentProgress(0); \n    }\n    Segment.track(\"Home - Next Video\"); \n  }\n\n  const lastVideo = () => {\n    if(currentUserVideoCount == 1){\n      // do nothing\n    } else if(videoIndex == 0){\n      setVideoIndex(currentUserVideoCount - 1); \n      setCurrentProgress(0); \n    } else {\n      setVideoIndex(videoIndex - 1); \n      setCurrentProgress(0); \n    }\n    Segment.track(\"Home - Last Video\"); \n  }\n\n  // tapping back arrow \n  const lastUser = () => {\n    setCurrentProgress(0); \n    setVideoIndex(0); \n    if(userIndex !== 0){\n      setUserIndex(userIndex - 1);\n    }\n  }\n\n\n  // tapping forward arrow\n  const nextUser = () => {\n\n    if(userIndex !== userCount - 1){\n      // setLikeCount(likeCount + 1); \n      setUserIndex(userIndex + 1);\n      setCurrentProgress(0); \n      setVideoIndex(0);    \n    } else {\n      if(userIndex == 0){\n        setQuerying(true);\n        queryVideos(); \n      } else {\n        setNoMoreVideos(true); \n        Segment.track(\"Home - Out of Users\")\n      }\n    }\n  }\n\n  function moreOptions() {\n    setOptionsModalVisible(true); \n  }\n\n\n  function goToAddVideo(){\n    setAddPopupVisible(false); \n    setNoLikesLeft(false); \n    props.navigation.navigate('Add');\n  }\n\n  const [currentProgress, setCurrentProgress] = useState(0); \n\n  const progressBarWidth = () => {\n    const windowWidth = Dimensions.get('window').width;\n    return windowWidth / currentUserVideoCount;\n    // switch(currentUserVideoCount) {\n    //   case 1: return windowWidth;\n    //   case 2: return '50%'; \n    //   case 3: return '33.3%';\n    //   case 4: return '25%'; \n    // }\n  }\n\n  function ProgressBarsContainer () {\n\n    const width = progressBarWidth(); \n    return (\n        <View style={homeStyles.progressBarContainer}>\n          {initAnimatedBars(width)}\n        </View>\n    )\n  }\n\n  function initAnimatedBars(width) {\n    const animatedBars = []; \n\n    for (let i = 0; i < currentUserVideoCount; i++){\n      if(i < videoIndex){\n        animatedBars.push(\n          <ProgressBar\n             progress={1}\n             width={width}\n             key={i}\n            \n             color=\"#734f96\"\n             unfilledColor=\"#E6E6FA\"\n             borderColor=\"#000\"\n             borderRadius={1}\n             height={3}\n            />\n        )\n      } else if (i == videoIndex) {\n        animatedBars.push(\n          <ProgressBar\n            key={i}\n            progress={currentProgress}\n             width={width}\n             color=\"#734f96\"\n             unfilledColor=\"#E6E6FA\"\n             borderColor=\"#000\"\n             borderRadius={1}\n             height={3}\n\n            />\n        )\n      } else {\n        animatedBars.push(\n          <ProgressBar\n             progress={0}\n             width={width}\n             key={i}\n             color=\"#734f96\"\n             unfilledColor=\"#E6E6FA\"\n             borderColor=\"#000\"\n             borderRadius={1}\n             height={3}\n            />\n        )\n      }\n    }\n    return animatedBars;\n  }\n\n  const _onPlaybackStatusUpdate = playbackStatus => {\n    if(playbackStatus.positionMillis && playbackStatus.durationMillis){\n      const progress = playbackStatus.positionMillis / playbackStatus.durationMillis; \n      setCurrentProgress(progress);   \n      if(playbackStatus.positionMillis == playbackStatus.durationMillis){\n        nextVideo(); \n      }\n    } else {\n      setCurrentProgress(0); \n    }\n  };\n\n  function UserInfo(){\n\n    function DistanceSeparator(){\n      if(currentCity != null || currentRegion != null){\n        return (\n          <Text style={styles.separatorText}>{'\\u2B24'}</Text>\n        )  \n      } else {\n        return null; \n      }    \n    }\n\n    function Distance(){\n      if(currentCity != null || currentRegion != null){\n        return (\n          <Text style={styles.locationText}>{currentCity}, {currentRegion}</Text>\n        )  \n      } else {\n        return null; \n      }\n    }\n\n\n    if(currentName){\n      if(currentCollege){\n        return (\n            <View style={homeStyles.userInfoContainer}>\n              <View style={{ flexDirection: 'row', alignItems: 'center'}}>\n                <Text style={styles.currentNameText}>{currentName}</Text>\n                {/* <Text style={styles.separatorText}>{'\\u2B24'}</Text> */}\n                <DistanceSeparator />\n                <Distance />  \n              </View>\n              <Text style={styles.locationText}>{currentCollege}</Text>      \n            </View>\n        )    \n      } else {\n        return (\n          <View style={homeStyles.userInfoContainer}>\n            <View style={{ flexDirection: 'row', alignItems: 'center'}}>\n              <Text style={styles.currentNameText}>{currentName}</Text>     \n              <DistanceSeparator />\n              <Distance />    \n            </View> \n          </View>\n        )    \n      }\n    } else {\n      return null; \n    }\n  }\n\n  const [dislikeColor, setDislikeColor] = useState('#eee');\n  const [likeColor, setLikeColor] = useState('#eee'); \n\n  useEffect(() => {\n    setDislikeColor(dislikeColors[userIndex] ? dislikeColors[userIndex].color : '#eee');\n    setLikeColor(likeColors[userIndex] ? likeColors[userIndex].color : '#eee'); \n  }, [userIndex, dislikeColors, likeColors]); \n\n\n  if(initialized && !noMoreVideos){\n    if('ios' in Constants.platform){\n      return (\n        <View style={styles.viewBackground}>\n          <View style={styles.videosView} {..._panResponder.panHandlers}>\n            <MultipleVideos \n              key={renderedUserIndex1}\n              shouldPlay={shouldPlay}\n              playbackObject={playbackObject}\n              _onPlaybackStatusUpdate={_onPlaybackStatusUpdate}\n              videoData={videoData}\n              userIndex={userIndex}\n              videoIndex={videoIndex}\n              renderedUserIndex={renderedUserIndex1}\n              userCount={userCount}\n            />\n            <MultipleVideos \n              key={renderedUserIndex2}\n              shouldPlay={shouldPlay}\n              playbackObject={playbackObject}\n              _onPlaybackStatusUpdate={_onPlaybackStatusUpdate}\n              videoData={videoData}\n              userIndex={userIndex}\n              videoIndex={videoIndex}\n              renderedUserIndex={renderedUserIndex2}\n              userCount={userCount}\n            />\n            <ProgressBarsContainer />\n            <BlurView tint=\"dark\" intensity={40} style={homeStyles.questionContainer}>\n              <Text style={styles.questionText}>{questionText}</Text>\n            </BlurView>\n            <UserInfo />\n          </View>\n          <View style={styles.heartView}>\n            <TouchableOpacity onPress={onDislike}>\n              <Entypo name='cross' size={65} color={dislikeColor} />  \n            </TouchableOpacity>      \n            <TouchableOpacity onPress={onLike}>\n              <Ionicons name='md-heart' size={65} color={likeColor} />        \n            </TouchableOpacity>      \n          </View>\n          <View style={{ ...StyleSheet.absoluteFill, height: '15%', alignItems: 'center', justifyContent: 'flex-end', paddingRight: 15, flexDirection: 'row'}}>\n            <TouchableOpacity onPress={lastUser} style={{paddingRight: 10}}>\n              <Entypo name='back' size={30} color='#eee' />        \n            </TouchableOpacity>\n            <TouchableOpacity onPress={moreOptions} >\n              <Ionicons name='ios-more' size={30} color='#eee' />        \n            </TouchableOpacity>\n          </View>\n\n  \n          <OptionsModal \n            visible={optionsModalVisible} \n            setVisible={setOptionsModalVisible} \n            videoId={videoId} \n            flags={flags}\n            userId={userId}\n            currentUserId={currentUserId}\n            videoData={videoData}\n            setVideoData={setVideoData}\n          />\n          <AddVideoPopup\n            visible={addPopupVisible}\n            setVisible={setAddPopupVisible}\n            goToAddVideo={goToAddVideo}\n            name={currentName}\n          />\n          <PushPopup\n            visible={pushPopupVisible}\n            setVisible={setPushPopupVisible}\n            registerForPushNotificationsAsync={registerForPushNotificationsAsync}\n            name={name}\n          />\n          <NoLikesPopup \n            visible={noLikesLeft}\n            setVisible={setNoLikesLeft}\n            goToAddVideo={goToAddVideo}\n          />\n        </View>\n      );\n    } else {\n      return (\n        <View style={styles.viewBackground}>\n          <View style={styles.videosView} {..._panResponder.panHandlers}>\n            <SingleVideo \n              shouldPlay={shouldPlay}\n              source={'https://stream.mux.com/' + muxPlaybackId + '.m3u8'}\n              key={'https://stream.mux.com/' + muxPlaybackId + '.m3u8'}\n            >\n            </SingleVideo>\n            <ProgressBarsContainer />\n            <BlurView tint=\"dark\" intensity={20} style={homeStyles.questionContainer}>\n              <Text style={styles.questionText}>{questionText}</Text>\n  \n            </BlurView>\n            <UserInfo />\n          </View>\n          <View style={styles.heartView}>\n            <TouchableOpacity onPress={onDislike}>      \n              <Entypo name='cross' size={65} color={dislikeColor} />  \n            </TouchableOpacity>      \n            <TouchableOpacity onPress={onLike}>\n              <Ionicons name='md-heart'  size={65} color={likeColor} />        \n            </TouchableOpacity>      \n          </View>\n          <View style={{ ...StyleSheet.absoluteFill, height: '15%', alignItems: 'center', justifyContent: 'flex-end', paddingRight: 15, flexDirection: 'row'}}>\n            <TouchableOpacity onPress={lastUser} style={{paddingRight: 10}}>\n              <Entypo name='back' size={30} color='#eee' />        \n            </TouchableOpacity>\n            <TouchableOpacity onPress={moreOptions} >\n              <Ionicons name='ios-more' size={30} color='#eee' />        \n            </TouchableOpacity>\n          </View>\n\n  \n          <OptionsModal \n            visible={optionsModalVisible} \n            setVisible={setOptionsModalVisible} \n            videoId={videoId} \n            flags={flags}\n            userId={userId}\n            currentUserId={currentUserId}\n            videoData={videoData}\n            setVideoData={setVideoData}\n          />\n          <AddVideoPopup\n            visible={addPopupVisible}\n            setVisible={setAddPopupVisible}\n            goToAddVideo={goToAddVideo}\n          />\n          <PushPopup\n            visible={pushPopupVisible}\n            setVisible={setPushPopupVisible}\n            registerForPushNotificationsAsync={registerForPushNotificationsAsync}\n          />\n          <NoLikesPopup \n            visible={noLikesLeft}\n            setVisible={setNoLikesLeft}\n            goToAddVideo={goToAddVideo}\n          />\n        </View>\n      );    \n    }\n  } else {\n    if(noMoreVideos == true){\n      return (\n        <View style={{ height: '100%', justifyContent: 'center', alignItems: 'center', backgroundColor: colors.primaryBlack }}>\n          <View style={{ height: '40%', width: '85%', backgroundColor: colors.primaryPurple, borderRadius: 5, padding: 10, alignItems: 'center', justifyContent: 'center' }}>\n              <Text style={{ fontSize: 22, fontWeight: 'bold', paddingTop: 15, paddingBottom: 5, color: colors.primaryWhite }}>Out of users!</Text>\n              <Text style={{ textAlign: 'center', fontSize: 20, fontWeight: '300', paddingHorizontal: 5, color: colors.primaryWhite }}>Come back tomorrow for more users :)</Text>\n          </View>\n      </View>      \n      )    \n    } else {\n      return (\n        <View style={styles.badInternetView}>\n          <ActivityIndicator size=\"small\" color=\"#eee\" />\n        </View>\n      )  \n    }\n  }\n}\n\nconst styles = StyleSheet.create({\n  currentNameText: { color: '#eee'},\n  separatorText: { color: '#eee', fontSize: 5, paddingLeft: 5},\n  locationText: { color: '#eee', paddingLeft: 5},\n  viewBackground: { flex: 1, backgroundColor: '#eee'},\n  videosView: { flex: 9, backgroundColor: '#000' },\n  questionText: {fontSize: 18,color: \"#eee\", padding: 15, paddingTop: 20, textAlign: 'center'},\n  heartView: { position: 'absolute', left: 0, right: 0, bottom: 0, alignItems: 'center', paddingBottom: 20, flexDirection: 'row', justifyContent: 'space-around'},\n  badInternetView: { backgroundColor: '#000', justifyContent: 'center', alignItems: 'center', flex: 1},\n  reloadText: { color: '#eee', fontSize: 20, paddingHorizontal: 20, paddingVertical: 5},\n  addVideoContainer: { \n    backgroundColor: colors.primaryWhite, \n    borderRadius: 5,\n    width: 250,\n    height: 50, \n    justifyContent: 'center', \n    alignItems: 'center'\n  }, \n  addVideoText: {\n      fontSize: 17,\n      color: colors.primaryPurple,\n      fontWeight: 'bold'\n  }\n});"]},"metadata":{},"sourceType":"module"}