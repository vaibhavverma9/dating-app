{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/onboarding/CollegeOnboarding.tsx\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { UserIdContext } from \"../../utils/context/UserIdContext\";\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { UPDATE_COLLEGE, GET_COLLEGES } from \"../../utils/graphql/GraphqlClient\";\nimport { _storeCollege, _storeCollegeLatitude, _storeCollegeLongitude } from \"../../utils/asyncStorage\";\nimport { colors } from \"../../styles/colors\";\nimport Autocomplete from 'react-native-autocomplete-input';\nimport LocationOnboarding from \"./LocationOnboarding\";\nimport * as Segment from 'expo-analytics-segment';\nexport default function CollegeOnboarding() {\n  var _useContext = useContext(UserIdContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      userId = _useContext2[0],\n      setUserId = _useContext2[1];\n\n  var _useMutation = useMutation(UPDATE_COLLEGE),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      updateCollege = _useMutation2[0],\n      updateCollegeData = _useMutation2[1].updateCollegeData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      collegeSubmitted = _useState2[0],\n      setCollegeSubmitted = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      college = _useState4[0],\n      setCollege = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nickname = _useState6[0],\n      setNickname = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      submitHidden = _useState8[0],\n      setSubmitHidden = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      colleges = _useState10[0],\n      setColleges = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      filteredColleges = _useState12[0],\n      setFilteredColleges = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      hideResults = _useState14[0],\n      setHideResults = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      collegeId = _useState16[0],\n      setCollegeId = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      collegeLatitude = _useState18[0],\n      setCollegeLatitude = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      collegeLongitude = _useState20[0],\n      setCollegeLongitude = _useState20[1];\n\n  var _useLazyQuery = useLazyQuery(GET_COLLEGES, {\n    onCompleted: function onCompleted(collegeData) {\n      processColleges(collegeData);\n    }\n  }),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getColleges = _useLazyQuery2[0],\n      collegeData = _useLazyQuery2[1].data;\n\n  useEffect(function () {\n    getColleges();\n    Segment.track(\"Onboarding - Submit College\");\n  }, []);\n\n  function processColleges(collegeData) {\n    setColleges(collegeData.colleges);\n    setFilteredColleges(collegeData.colleges);\n  }\n\n  var submitCollege = function submitCollege() {\n    _storeCollege(college);\n\n    _storeCollegeLatitude(collegeLatitude);\n\n    _storeCollegeLongitude(collegeLongitude);\n\n    updateCollege({\n      variables: {\n        userId: userId,\n        college: college,\n        collegeId: collegeId\n      }\n    });\n    setCollegeSubmitted(true);\n  };\n\n  function handleSelectItem(item) {\n    setCollege(item.name);\n    setCollegeId(item.id);\n    setCollegeLatitude(item.latitude);\n    setCollegeLongitude(item.longitude);\n    setNickname(item.nickname);\n    setHideResults(true);\n    setSubmitHidden(false);\n  }\n\n  function handleChangeText(item) {\n    setCollege(item);\n    setHideResults(false);\n    setSubmitHidden(true);\n    var filteredColleges = colleges.filter(function (college) {\n      return college.name.toLowerCase().match(item.toLowerCase()) || college.nickname.toLowerCase().match(item.toLowerCase());\n    });\n    setFilteredColleges(filteredColleges);\n  }\n\n  function SubmitButton() {\n    if (submitHidden) {\n      return null;\n    } else {\n      return React.createElement(View, {\n        style: {\n          paddingTop: '12%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: submitCollege,\n        style: styles.locationsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.locationsText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }\n      }, \"Submit\")));\n    }\n  }\n\n  if (collegeSubmitted) {\n    return React.createElement(LocationOnboarding, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    });\n  } else if (filteredColleges) {\n    return React.createElement(TouchableWithoutFeedback, {\n      onPress: Keyboard.dismiss,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: primaryColor\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: {\n        height: '40%',\n        width: '85%',\n        backgroundColor: secondaryColor,\n        borderRadius: 5,\n        padding: 10,\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, React.createElement(View, {\n      style: {\n        paddingTop: '10%',\n        height: '25%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, React.createElement(Ionicons, {\n      name: \"md-person\",\n      size: 45,\n      color: primaryColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    })), React.createElement(Text, {\n      style: {\n        fontSize: 25,\n        fontWeight: 'bold',\n        padding: 15,\n        height: '25%',\n        color: primaryColor\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, \"Choose a college\"), React.createElement(View, {\n      style: {\n        height: '15%',\n        width: '100%',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    }, React.createElement(Autocomplete, {\n      data: filteredColleges,\n      defaultValue: college,\n      onChangeText: function onChangeText(item) {\n        return handleChangeText(item);\n      },\n      hideResults: hideResults,\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return handleSelectItem(item);\n          },\n          style: {\n            height: 40,\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: {\n            color: primaryColor,\n            fontSize: 14\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 35\n          }\n        }, item.name, \" (\", item.nickname, \")\"));\n      },\n      containerStyle: {\n        width: '100%'\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    })), React.createElement(SubmitButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: {\n        height: '25%',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    })));\n  } else {\n    return React.createElement(TouchableWithoutFeedback, {\n      onPress: Keyboard.dismiss,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: primaryColor\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        height: '40%',\n        width: '85%',\n        backgroundColor: secondaryColor,\n        borderRadius: 5,\n        padding: 10,\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: {\n        paddingTop: '10%',\n        height: '25%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, React.createElement(Ionicons, {\n      name: \"md-person\",\n      size: 45,\n      color: primaryColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    })), React.createElement(Text, {\n      style: {\n        fontSize: 25,\n        fontWeight: 'bold',\n        padding: 15,\n        height: '25%',\n        color: primaryColor\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, \"Choose a college\"), React.createElement(View, {\n      style: {\n        height: '15%',\n        width: '100%',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }), React.createElement(SubmitButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    })), React.createElement(View, {\n      style: {\n        height: '25%',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    })));\n  }\n}\nvar primaryColor = colors.primaryPurple;\nvar secondaryColor = colors.secondaryWhite;\nvar styles = StyleSheet.create({\n  locationsContainer: {\n    backgroundColor: primaryColor,\n    borderRadius: 5,\n    width: 250,\n    height: 50,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  locationsText: {\n    fontSize: 17,\n    color: secondaryColor,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"sources":["/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/onboarding/CollegeOnboarding.tsx"],"names":["React","useState","useContext","useEffect","Ionicons","UserIdContext","useMutation","useLazyQuery","UPDATE_COLLEGE","GET_COLLEGES","_storeCollege","_storeCollegeLatitude","_storeCollegeLongitude","colors","Autocomplete","LocationOnboarding","Segment","CollegeOnboarding","userId","setUserId","updateCollege","updateCollegeData","collegeSubmitted","setCollegeSubmitted","college","setCollege","nickname","setNickname","submitHidden","setSubmitHidden","colleges","setColleges","filteredColleges","setFilteredColleges","hideResults","setHideResults","collegeId","setCollegeId","collegeLatitude","setCollegeLatitude","collegeLongitude","setCollegeLongitude","onCompleted","collegeData","processColleges","getColleges","data","track","submitCollege","variables","handleSelectItem","item","name","id","latitude","longitude","handleChangeText","filter","toLowerCase","match","SubmitButton","paddingTop","styles","locationsContainer","locationsText","Keyboard","dismiss","height","justifyContent","alignItems","backgroundColor","primaryColor","width","secondaryColor","borderRadius","padding","fontSize","fontWeight","color","toString","primaryPurple","secondaryWhite","StyleSheet","create"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport * as Location from 'expo-location';\nimport { Text, View, StyleSheet, TextInput, Keyboard } from 'react-native';\nimport { TouchableOpacity, TouchableWithoutFeedback } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { UserIdContext } from '../../utils/context/UserIdContext'\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { UPDATE_COLLEGE, GET_COLLEGES } from '../../utils/graphql/GraphqlClient';\nimport { _storeLatitude, _storeLongitude, _storeCollege, _storeCollegeLatitude, _storeCollegeLongitude } from '../../utils/asyncStorage'; \nimport { colors } from '../../styles/colors';\nimport CollegeEventsOnboarding from './CollegeEventsOnboarding';\nimport Autocomplete from 'react-native-autocomplete-input';\nimport LocationOnboarding from './LocationOnboarding';\nimport * as Segment from 'expo-analytics-segment';\n\nexport default function CollegeOnboarding() {\n\n    const [userId, setUserId] = useContext(UserIdContext);\n    const [updateCollege, { updateCollegeData }] = useMutation(UPDATE_COLLEGE);\n    const [collegeSubmitted, setCollegeSubmitted] = useState(false); \n    const [college, setCollege] = useState(''); \n    const [nickname, setNickname] = useState('');\n    const [submitHidden, setSubmitHidden] = useState(true); \n    const [colleges, setColleges] = useState(null); \n    const [filteredColleges, setFilteredColleges] = useState(null); \n    const [hideResults, setHideResults] = useState(true); \n    const [collegeId, setCollegeId] = useState(null); \n    const [collegeLatitude, setCollegeLatitude] = useState(null); \n    const [collegeLongitude, setCollegeLongitude] = useState(null); \n\n    const [getColleges, { data: collegeData }] = useLazyQuery(GET_COLLEGES, \n        { \n          onCompleted: (collegeData) => { processColleges(collegeData) } \n    }); \n\n    useEffect(() => {\n        getColleges(); \n        Segment.track(\"Onboarding - Submit College\");\n    }, []);\n\n    function processColleges(collegeData){\n        setColleges(collegeData.colleges); \n        setFilteredColleges(collegeData.colleges);\n    }\n\n    const submitCollege = () => {\n        _storeCollege(college); \n        _storeCollegeLatitude(collegeLatitude);\n        _storeCollegeLongitude(collegeLongitude);  \n\n        updateCollege({ variables: { userId, college: college, collegeId: collegeId }});\n        setCollegeSubmitted(true); \n    }\n\n    function handleSelectItem(item){\n        setCollege(item.name); \n        setCollegeId(item.id); \n        setCollegeLatitude(item.latitude);\n        setCollegeLongitude(item.longitude); \n        setNickname(item.nickname); \n        setHideResults(true); \n        setSubmitHidden(false); \n    }\n\n    function handleChangeText(item){\n        setCollege(item); \n        setHideResults(false);\n        setSubmitHidden(true); \n        const filteredColleges = colleges.filter(college => {\n            return college.name.toLowerCase().match( item.toLowerCase() ) || college.nickname.toLowerCase().match( item.toLowerCase() );\n        });\n        setFilteredColleges(filteredColleges); \n    }\n\n    function SubmitButton(){\n        if(submitHidden){\n            return null;\n        } else {\n            return (\n                <View style={{ paddingTop: '12%' }}>\n                    <TouchableOpacity onPress={submitCollege} style={styles.locationsContainer}>\n                        <Text style={styles.locationsText}>Submit</Text>\n                    </TouchableOpacity>\n                </View>\n            )    \n        }\n    }\n    \n    if(collegeSubmitted) {\n        return (\n            <LocationOnboarding />\n        )\n    } else if(filteredColleges) {\n        return (\n            <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n                <View style={{ height: '100%', justifyContent: 'center', alignItems: 'center', backgroundColor: primaryColor }}>\n                    <View style={{ height: '40%', width: '85%', backgroundColor: secondaryColor, borderRadius: 5, padding: 10, alignItems: 'center' }}>\n                        <View style={{ paddingTop: '10%', height: '25%'}}>\n                            <Ionicons name=\"md-person\" size={45} color={primaryColor} />\n                        </View>        \n                        <Text style={{ fontSize: 25, fontWeight: 'bold', padding: 15, height: '25%', color: primaryColor }}>Choose a college</Text>\n\n                        <View style={{ \n                            height: '15%',\n                            width: '100%', \n                            alignItems: 'center', \n                        }}>\n\n                        <Autocomplete\n                            data={filteredColleges}\n                            defaultValue={college}\n                            onChangeText={item => handleChangeText(item)}\n                            hideResults={hideResults}\n                            renderItem={({ item }) => (\n                                <TouchableOpacity \n                                    onPress={() => handleSelectItem(item)}\n                                    style={{ height: 40, justifyContent: 'center'}}\n                                >\n                                  <Text style={{ color: primaryColor, fontSize: 14}}>{item.name} ({item.nickname})</Text>\n                                </TouchableOpacity>\n                            )}\n                            containerStyle={{ width: '100%'}}\n                            keyExtractor={(item) => item.id.toString()}\n                        />\n                        </View>\n                        <SubmitButton />\n                    </View>\n                    <View style={{ height: '25%', justifyContent: 'center'}}>\n                    </View>\n                </View>\n            </TouchableWithoutFeedback>\n        );\n    } else {\n        return(\n            <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n            <View style={{ height: '100%', justifyContent: 'center', alignItems: 'center', backgroundColor: primaryColor }}>\n                <View style={{ height: '40%', width: '85%', backgroundColor: secondaryColor, borderRadius: 5, padding: 10, alignItems: 'center' }}>\n                    <View style={{ paddingTop: '10%', height: '25%'}}>\n                        <Ionicons name=\"md-person\" size={45} color={primaryColor} />\n                    </View>        \n                    <Text style={{ fontSize: 25, fontWeight: 'bold', padding: 15, height: '25%', color: primaryColor }}>Choose a college</Text>\n                    <View style={{ \n                            height: '15%',\n                            width: '100%', \n                            alignItems: 'center', \n                        }}>\n                    </View>    \n                    <SubmitButton />\n                </View>\n                <View style={{ height: '25%', justifyContent: 'center'}}>\n                </View>\n            </View>\n        </TouchableWithoutFeedback>\n        )\n    }\n}\n\nconst primaryColor = colors.primaryPurple;\nconst secondaryColor = colors.secondaryWhite; \n\nconst styles = StyleSheet.create({\n    locationsContainer: { \n        backgroundColor: primaryColor, \n        borderRadius: 5,\n        width: 250,\n        height: 50, \n        justifyContent: 'center', \n        alignItems: 'center'\n    }, \n    locationsText: {\n        fontSize: 17,\n        color: secondaryColor,\n        fontWeight: 'bold'\n    }\n});\n"]},"metadata":{},"sourceType":"module"}