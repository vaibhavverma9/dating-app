{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useRef, useEffect, useCallback } from 'react';\nimport { Transitioning, Transition } from 'react-native-reanimated';\nimport ControlledPhoneAuth from \"./Controlled-Phone-Screen\";\nimport ControlledConfirmPhone from \"./Controlled-Confirm-Screen\";\nimport { empty } from \"../../utils/empty\";\nimport { useDoormanTheme } from \"../../hooks/use-doorman-theme\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { useAuthFlowState } from 'react-doorman';\nexport function AuthFlow(props) {\n  var _useDoormanTheme = useDoormanTheme(),\n      tintColor = _useDoormanTheme.tintColor;\n\n  var _useAuthFlowState = useAuthFlowState(),\n      setCodeScreenReady = _useAuthFlowState.setCodeScreenReady,\n      ready = _useAuthFlowState.ready;\n\n  var _props$phoneScreenPro = props.phoneScreenProps,\n      phoneScreenProps = _props$phoneScreenPro === void 0 ? empty.object : _props$phoneScreenPro,\n      _props$confirmScreenP = props.confirmScreenProps,\n      confirmScreenProps = _props$confirmScreenP === void 0 ? empty.object : _props$confirmScreenP,\n      onCodeVerified = props.onCodeVerified,\n      onUserSuccessfullySignedIn = props.onUserSuccessfullySignedIn,\n      onSent = props.onSmsSuccessfullySent,\n      otherProps = _objectWithoutProperties(props, [\"phoneScreenProps\", \"confirmScreenProps\", \"onCodeVerified\", \"onUserSuccessfullySignedIn\", \"onSmsSuccessfullySent\"]);\n\n  var commonScreenProps = _objectSpread({}, otherProps);\n\n  var transitionRef = useRef(null);\n  useEffect(function () {\n    var _transitionRef$curren;\n\n    if (Platform.OS !== 'web') (_transitionRef$curren = transitionRef.current) === null || _transitionRef$curren === void 0 ? void 0 : _transitionRef$curren.animateNextTransition();\n  }, [ready]);\n  var sendCallback = useRef(onSent);\n  useEffect(function () {\n    sendCallback.current = onSent;\n  });\n  var onSmsSuccessfullySent = useCallback(function (info) {\n    var _sendCallback$current;\n\n    (_sendCallback$current = sendCallback.current) === null || _sendCallback$current === void 0 ? void 0 : _sendCallback$current.call(sendCallback, info);\n    setCodeScreenReady(true);\n  }, [setCodeScreenReady]);\n  var onGoBack = useCallback(function () {\n    return setCodeScreenReady(false);\n  }, [setCodeScreenReady]);\n  return React.createElement(Transitioning.View, {\n    ref: transitionRef,\n    transition: React.createElement(Transition.Together, null, React.createElement(Transition.Change, {\n      interpolation: \"easeInOut\"\n    }), React.createElement(Transition.In, {\n      type: \"fade\"\n    })),\n    style: styles.container\n  }, !ready ? React.createElement(React.Fragment, null, React.createElement(ControlledPhoneAuth, _extends({}, commonScreenProps, phoneScreenProps, {\n    onSmsSuccessfullySent: onSmsSuccessfullySent,\n    tintColor: tintColor\n  }))) : React.createElement(React.Fragment, null, React.createElement(ControlledConfirmPhone, _extends({}, commonScreenProps, confirmScreenProps, {\n    onGoBack: onGoBack,\n    onCodeVerified: onCodeVerified,\n    onUserSuccessfullySignedIn: onUserSuccessfullySignedIn\n  }))));\n}\nAuthFlow.PhoneScreen = ControlledPhoneAuth;\nAuthFlow.ConfirmScreen = ControlledConfirmPhone;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["Auth-Flow.tsx"],"names":["tintColor","useDoormanTheme","ready","useAuthFlowState","phoneScreenProps","empty","confirmScreenProps","onSmsSuccessfullySent","onSent","commonScreenProps","transitionRef","useRef","useEffect","Platform","sendCallback","useCallback","info","setCodeScreenReady","onGoBack","styles","container","onUserSuccessfullySignedIn","AuthFlow","flex"],"mappings":"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","sourcesContent":["import React, {\n  ComponentPropsWithoutRef,\n  useRef,\n  useEffect,\n  useCallback,\n} from 'react'\nimport {\n  Transitioning,\n  Transition,\n  TransitioningView,\n} from 'react-native-reanimated'\nimport ControlledPhoneAuth from './Controlled-Phone-Screen'\nimport ControlledConfirmPhone from './Controlled-Confirm-Screen'\nimport { empty } from '../../utils/empty'\nimport { useDoormanTheme } from '../../hooks/use-doorman-theme'\nimport { CommonScreenProps } from '../types'\nimport { StyleSheet, Platform } from 'react-native'\nimport { useAuthFlowState } from 'react-doorman'\n\ntype Props = {\n  phoneScreenProps?: Omit<\n    ComponentPropsWithoutRef<typeof ControlledPhoneAuth>,\n    'onSmsSuccessfullySent'\n  >\n  confirmScreenProps?: Omit<\n    ComponentPropsWithoutRef<typeof ControlledConfirmPhone>,\n    'tintColor' | 'onCodeVerified' | 'onUserSuccessfullySignedIn'\n  >\n  onUserSuccessfullySignedIn?: ComponentPropsWithoutRef<\n    typeof ControlledConfirmPhone\n  >['onUserSuccessfullySignedIn']\n  onCodeVerified?: ComponentPropsWithoutRef<\n    typeof ControlledConfirmPhone\n  >['onCodeVerified']\n  onSmsSuccessfullySent?: ComponentPropsWithoutRef<\n    typeof ControlledPhoneAuth\n  >['onSmsSuccessfullySent']\n} & CommonScreenProps\n\nexport function AuthFlow(props: Props) {\n  const { tintColor } = useDoormanTheme()\n  const { setCodeScreenReady, ready } = useAuthFlowState()\n\n  const {\n    phoneScreenProps = empty.object,\n    confirmScreenProps = empty.object,\n    onCodeVerified,\n    onUserSuccessfullySignedIn,\n    onSmsSuccessfullySent: onSent,\n    ...otherProps\n  } = props\n\n  const commonScreenProps: CommonScreenProps = {\n    ...otherProps,\n  }\n\n  const transitionRef = useRef<TransitioningView>(null)\n  useEffect(() => {\n    if (Platform.OS !== 'web') transitionRef.current?.animateNextTransition()\n  }, [ready])\n\n  const sendCallback = useRef(onSent)\n  useEffect(() => {\n    sendCallback.current = onSent\n  })\n\n  const onSmsSuccessfullySent = useCallback(\n    (info: { phoneNumber: string }) => {\n      sendCallback.current?.(info)\n      setCodeScreenReady(true)\n    },\n    [setCodeScreenReady]\n  )\n  const onGoBack = useCallback(() => setCodeScreenReady(false), [\n    setCodeScreenReady,\n  ])\n\n  return (\n    <Transitioning.View\n      ref={transitionRef}\n      transition={\n        <Transition.Together>\n          {/* <Transition.Out type=\"fade\" durationMs={100} /> */}\n          <Transition.Change interpolation=\"easeInOut\" />\n          <Transition.In type=\"fade\" />\n        </Transition.Together>\n      }\n      style={styles.container}\n    >\n      {!ready ? (\n        <>\n          <ControlledPhoneAuth\n            {...commonScreenProps}\n            {...phoneScreenProps}\n            onSmsSuccessfullySent={onSmsSuccessfullySent}\n            tintColor={tintColor}\n          />\n        </>\n      ) : (\n        <>\n          <ControlledConfirmPhone\n            {...commonScreenProps}\n            {...confirmScreenProps}\n            onGoBack={onGoBack}\n            onCodeVerified={onCodeVerified}\n            onUserSuccessfullySignedIn={onUserSuccessfullySignedIn}\n          />\n        </>\n      )}\n    </Transitioning.View>\n  )\n}\n\nAuthFlow.PhoneScreen = ControlledPhoneAuth\nAuthFlow.ConfirmScreen = ControlledConfirmPhone\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n})\n"]},"metadata":{},"sourceType":"module"}