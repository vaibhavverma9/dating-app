{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/videosPage/VideosView.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport * as Segment from 'expo-analytics-segment';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { GET_LAST_DAY_VIDEOS, INSERT_INIT_VIDEO, UPDATE_LAST_UPLOADED, ON_VIDEO_UPDATED, GET_PAST_VIDEOS, DELETE_VIDEO_PASSTHROUGH_ID, UPDATE_VIDEO_ERRORED } from \"../../utils/graphql/GraphqlClient\";\nimport { UserIdContext } from \"../../utils/context/UserIdContext\";\nimport { ScrollView } from 'react-native-gesture-handler';\nimport { useMutation, useSubscription, useLazyQuery } from '@apollo/client';\nimport FullPageVideos from \"../modals/FullPageVideos\";\nimport { _retrieveName, _retrieveBio } from \"../../utils/asyncStorage\";\nimport axios from 'axios';\nimport { Ionicons, MaterialIcons, Entypo, SimpleLineIcons, MaterialCommunityIcons } from '@expo/vector-icons';\nimport { colors } from \"../../styles/colors\";\nimport SettingsPopup from \"../modals/SettingsPopup\";\nimport * as Sentry from 'sentry-expo';\nimport Constants from 'expo-constants';\nimport { useDoormanUser } from 'react-native-doorman';\nimport { _clearDoormanUid, _clearOnboarded, _clearUserId, _clearBio, _clearName } from \"../../utils/asyncStorage\";\nexport default function VideosView(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastDayVideos = _useState2[0],\n      setLastDayVideos = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      storedLastDayVideos = _useState4[0],\n      setStoredLastDayVideos = _useState4[1];\n\n  var _useContext = useContext(UserIdContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      userId = _useContext2[0],\n      setUserId = _useContext2[1];\n\n  var _useMutation = useMutation(INSERT_INIT_VIDEO),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      insertInitVideo = _useMutation2[0],\n      insertInitVideoData = _useMutation2[1].insertInitVideoData;\n\n  var _useMutation3 = useMutation(UPDATE_LAST_UPLOADED),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      updateLastUploaded = _useMutation4[0],\n      updateLastUploadedData = _useMutation4[1].updateLastUploadedData;\n\n  var _useMutation5 = useMutation(DELETE_VIDEO_PASSTHROUGH_ID),\n      _useMutation6 = _slicedToArray(_useMutation5, 2),\n      deleteVideoPassthrough = _useMutation6[0],\n      deleteVideoPassthroughData = _useMutation6[1].deleteVideoPassthroughData;\n\n  var _useMutation7 = useMutation(UPDATE_VIDEO_ERRORED),\n      _useMutation8 = _slicedToArray(_useMutation7, 2),\n      updateVideoErrored = _useMutation8[0],\n      updateVideoErroredData = _useMutation8[1].updateVideoErroredData;\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      uploadedVideos = _useState6[0],\n      setUploadedVideos = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      name = _useState8[0],\n      setName = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      bio = _useState10[0],\n      setBio = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      initialized = _useState12[0],\n      setInitialized = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      settingsVisible = _useState14[0],\n      setSettingsVisible = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      timedOut = _useState16[0],\n      setTimedOut = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      bestVideos = _useState18[0],\n      setBestVideos = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      averageVideos = _useState20[0],\n      setAverageVideos = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      worstVideos = _useState22[0],\n      setWorstVideos = _useState22[1];\n\n  var yesterday = new Date(Date.now() - 86400000);\n  var thumbnailPadding = '0.2%';\n  var length = 110;\n\n  var _useDoormanUser = useDoormanUser(),\n      signOut = _useDoormanUser.signOut;\n\n  var pressSignOut = function pressSignOut() {\n    return _regeneratorRuntime.async(function pressSignOut$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(_clearDoormanUid());\n\n          case 2:\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(_clearOnboarded());\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(_clearUserId());\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(_clearBio());\n\n          case 8:\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(_clearName());\n\n          case 10:\n            signOut();\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _useLazyQuery = useLazyQuery(GET_LAST_DAY_VIDEOS, {\n    onCompleted: function onCompleted(storedLastDayVideosData) {\n      setStoredLastDayVideos(storedLastDayVideosData.videos);\n    }\n  }),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getStoredLastDayVideos = _useLazyQuery2[0],\n      storedLastDayVideosData = _useLazyQuery2[1].data;\n\n  var _useLazyQuery3 = useLazyQuery(GET_PAST_VIDEOS, {\n    onCompleted: function onCompleted(getPastVideosData) {\n      initPastVideos(getPastVideosData.videos);\n    }\n  }),\n      _useLazyQuery4 = _slicedToArray(_useLazyQuery3, 2),\n      getPastVideos = _useLazyQuery4[0],\n      getPastVideosData = _useLazyQuery4[1].data;\n\n  function wait(timeout) {\n    return new Promise(function (resolve) {\n      setTimeout(resolve, timeout);\n    });\n  }\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      refreshing = _React$useState2[0],\n      setRefreshing = _React$useState2[1];\n\n  var onRefresh = React.useCallback(function () {\n    setRefreshing(true);\n    getStoredLastDayVideos({\n      variables: {\n        userId: userId,\n        yesterday: yesterday\n      }\n    });\n    getPastVideos({\n      variables: {\n        userId: userId,\n        yesterday: yesterday\n      }\n    });\n    wait(2000).then(function () {\n      return setRefreshing(false);\n    });\n  }, [refreshing]);\n  useEffect(function () {\n    Segment.screen('Videos');\n    getStoredLastDayVideos({\n      variables: {\n        userId: userId,\n        yesterday: yesterday\n      }\n    });\n    getPastVideos({\n      variables: {\n        userId: userId,\n        yesterday: yesterday\n      }\n    });\n    initProfile();\n    setTimeout(function () {\n      setTimedOut(true);\n    }, 3000);\n  }, []);\n  useEffect(function () {\n    props.navigation.addListener('focus', function () {\n      initProfile();\n    });\n  }, [props.navigation]);\n\n  function initProfile() {\n    var name, bio;\n    return _regeneratorRuntime.async(function initProfile$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(_retrieveName());\n\n          case 2:\n            name = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(_retrieveBio());\n\n          case 5:\n            bio = _context2.sent;\n            setName(name);\n            setBio(bio);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    var params = props.route.params;\n\n    if (params != undefined) {\n      setUploadedVideos([params].concat(_toConsumableArray(uploadedVideos)));\n      postVideo(params);\n    }\n  }, [props.route]);\n  useEffect(function () {\n    var blankVideo = {\n      type: 'blankVideo',\n      id: 0\n    };\n    setLastDayVideos([blankVideo].concat(_toConsumableArray(uploadedVideos), _toConsumableArray(storedLastDayVideos)));\n  }, [storedLastDayVideos, uploadedVideos]);\n\n  function initPastVideos(videoData) {\n    setBestVideos(videoData.filter(function (video) {\n      return video.rank == 1;\n    }));\n    setAverageVideos(videoData.filter(function (video) {\n      return video.rank == 2;\n    }));\n    setWorstVideos(videoData.filter(function (video) {\n      return video.rank == 3;\n    }));\n    setInitialized(true);\n  }\n\n  var windowWidth = Math.round(Dimensions.get('window').width);\n  var thumbnailWidth = windowWidth * 0.33;\n  var thumbnailHeight = windowWidth * 0.4;\n\n  function goToAddPage() {\n    props.navigation.navigate('Add');\n  }\n\n  function VideoView(_ref) {\n    var video = _ref.video;\n\n    if (video.type == 'blankVideo') {\n      return React.createElement(BlankVideoView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 20\n        }\n      });\n    } else if (video.type == 'uploadedVideo') {\n      return React.createElement(UploadingView, {\n        uploadingVideo: video,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 20\n        }\n      });\n    } else {\n      return React.createElement(IndividualVideoView, {\n        video: video,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 20\n        }\n      });\n    }\n  }\n\n  function UploadingView(_ref2) {\n    var uploadingVideo = _ref2.uploadingVideo;\n\n    function goToVideo() {\n      setFullVideoVisible(true);\n    }\n\n    function VideoSubscription(_ref3) {\n      var passthroughId = _ref3.passthroughId;\n\n      var _useSubscription = useSubscription(ON_VIDEO_UPDATED, {\n        variables: {\n          passthroughId: passthroughId\n        }\n      }),\n          data = _useSubscription.data,\n          loading = _useSubscription.loading,\n          error = _useSubscription.error;\n\n      if (loading) {\n        return null;\n      }\n\n      if (error || !data) {\n        return null;\n      }\n\n      if (data) {\n        var videos = data.videos;\n\n        if (videos.length > 0) {\n          var videoData = videos[0];\n          var _status = videoData.status;\n\n          if (_status == \"preparing\" || _status == \"ready\") {\n            var tempUploadedVideos = uploadedVideos.map(function (uploadedVideo) {\n              if (uploadedVideo.passthroughId == passthroughId && uploadedVideo.status != \"errored\") {\n                return _objectSpread(_objectSpread({}, uploadedVideo), {}, {\n                  status: _status,\n                  id: videoData.id\n                });\n              } else {\n                return uploadedVideo;\n              }\n            });\n            setUploadedVideos(tempUploadedVideos);\n          } else if (_status == \"errored\") {\n            var _tempUploadedVideos = uploadedVideos.map(function (uploadedVideo) {\n              if (uploadedVideo.passthroughId == passthroughId) {\n                return _objectSpread(_objectSpread({}, uploadedVideo), {}, {\n                  status: _status,\n                  id: videoData.id\n                });\n              } else {\n                return uploadedVideo;\n              }\n            });\n\n            setUploadedVideos(_tempUploadedVideos);\n          }\n        }\n      }\n\n      return null;\n    }\n\n    var _useState23 = useState(false),\n        _useState24 = _slicedToArray(_useState23, 2),\n        fullVideoVisible = _useState24[0],\n        setFullVideoVisible = _useState24[1];\n\n    var _useState25 = useState(uploadingVideo.status),\n        _useState26 = _slicedToArray(_useState25, 2),\n        status = _useState26[0],\n        setStatus = _useState26[1];\n\n    var questionText = uploadingVideo.questionText;\n    var questionId = uploadingVideo.questionId;\n    var thumbnailUri = uploadingVideo.thumbnailUri;\n    var videoUri = uploadingVideo.videoUri;\n    var passthroughId = uploadingVideo.passthroughId;\n    var id = uploadingVideo.id;\n\n    function reuploadVideo() {\n      var uploadedVideosFiltered, newPassthroughId, params;\n      return _regeneratorRuntime.async(function reuploadVideo$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              uploadedVideosFiltered = uploadedVideos.filter(function (video) {\n                return video.id !== id;\n              });\n              deleteVideoPassthrough({\n                variables: {\n                  passthroughId: passthroughId\n                }\n              });\n              newPassthroughId = Math.floor(Math.random() * 1000000000) + 1;\n              params = {\n                questionText: questionText,\n                questionId: questionId,\n                thumbnailUri: thumbnailUri,\n                videoUri: videoUri,\n                passthroughId: newPassthroughId.toString(),\n                status: 'waiting',\n                type: 'uploadedVideo',\n                id: newPassthroughId,\n                videoId: null\n              };\n              setUploadedVideos([params].concat(_toConsumableArray(uploadedVideosFiltered)));\n              postVideo(params);\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    ;\n\n    if (status == \"ready\" || status == \"preparing\") {\n      return React.createElement(View, {\n        style: styles.thumbnailPaddingStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: goToVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        style: styles.thumbnailDimensions,\n        source: {\n          uri: thumbnailUri\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }\n      })), React.createElement(FullPageVideos, {\n        visible: fullVideoVisible,\n        setVisible: setFullVideoVisible,\n        source: videoUri,\n        questionText: questionText,\n        showOptions: true,\n        videoId: id,\n        removeVideo: removeVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }\n      }));\n    } else if (status == \"errored\") {\n      return React.createElement(TouchableOpacity, {\n        onPress: reuploadVideo,\n        style: styles.thumbnailPaddingStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }\n      }, React.createElement(ImageBackground, {\n        style: styles.thumbnailDimensions,\n        source: {\n          uri: thumbnailUri\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: styles.activityView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 25\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-refresh\",\n        color: \"#eee\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        style: {\n          color: '#eee',\n          fontSize: 16\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 29\n        }\n      }, \"Upload failed\"))), React.createElement(VideoSubscription, {\n        passthroughId: passthroughId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        style: styles.thumbnailPaddingStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 17\n        }\n      }, React.createElement(ImageBackground, {\n        style: styles.thumbnailDimensions,\n        source: {\n          uri: thumbnailUri\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: styles.activityView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"small\",\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 29\n        }\n      }))), React.createElement(VideoSubscription, {\n        passthroughId: passthroughId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  function removeVideo(videoId) {\n    return _regeneratorRuntime.async(function removeVideo$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setUploadedVideos(uploadedVideos.filter(function (video) {\n              return video.id !== videoId;\n            }));\n            setStoredLastDayVideos(storedLastDayVideos.filter(function (video) {\n              return video.id !== videoId;\n            }));\n            setBestVideos(bestVideos.filter(function (video) {\n              return video.id !== videoId;\n            }));\n            setAverageVideos(averageVideos.filter(function (video) {\n              return video.id !== videoId;\n            }));\n            setWorstVideos(worstVideos.filter(function (video) {\n              return video.id !== videoId;\n            }));\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function IndividualVideoView(_ref4) {\n    var video = _ref4.video;\n\n    function goToVideo() {\n      setFullVideoVisible(true);\n    }\n\n    var _useState27 = useState(false),\n        _useState28 = _slicedToArray(_useState27, 2),\n        fullVideoVisible = _useState28[0],\n        setFullVideoVisible = _useState28[1];\n\n    var _useState29 = useState(\"ready\"),\n        _useState30 = _slicedToArray(_useState29, 2),\n        status = _useState30[0],\n        setStatus = _useState30[1];\n\n    var muxPlaybackId = video.muxPlaybackId;\n    var questionText = video.videoQuestion ? video.videoQuestion.questionText : \"\";\n    var muxPlaybackUrl = 'https://image.mux.com/' + muxPlaybackId + '/thumbnail.jpg?time=0';\n    var total = video.likes + video.dislikes;\n\n    if (status == \"ready\") {\n      return React.createElement(View, {\n        style: styles.thumbnailPaddingStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: goToVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }\n      }, React.createElement(ImageBackground, {\n        style: styles.thumbnailDimensionsFlexEnd,\n        source: {\n          uri: muxPlaybackUrl\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: styles.videoViews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 29\n        }\n      }, React.createElement(SimpleLineIcons, {\n        name: \"control-play\",\n        color: colors.secondaryWhite,\n        size: 14,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 33\n        }\n      }), React.createElement(Text, {\n        style: styles.videoViewsText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 33\n        }\n      }, total)))), React.createElement(FullPageVideos, {\n        visible: fullVideoVisible,\n        setVisible: setFullVideoVisible,\n        source: 'https://stream.mux.com/' + muxPlaybackId + '.m3u8',\n        questionText: questionText,\n        likes: video.likes,\n        views: total,\n        showOptions: true,\n        videoId: video.id,\n        removeVideo: removeVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return null;\n    }\n  }\n\n  function BlankVideoView() {\n    return React.createElement(View, {\n      style: styles.thumbnailPaddingStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: goToAddPage,\n      style: styles.goToAddPageStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }\n    }, React.createElement(Ionicons, {\n      name: \"ios-add\",\n      color: \"#eee\",\n      size: 60,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  function postVideo(params) {\n    var questionText, questionId, thumbnailUri, videoUri, passthroughId, blob, res, authenticatedUrl, status, tempUploadedVideos, timestamp;\n    return _regeneratorRuntime.async(function postVideo$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            questionText = params.questionText;\n            questionId = params.questionId;\n            thumbnailUri = params.thumbnailUri;\n            videoUri = params.videoUri;\n            passthroughId = params.passthroughId;\n            Segment.trackWithProperties(\"Upload Video\", {\n              questionId: questionId\n            });\n            _context5.next = 8;\n            return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n              var xhr = new XMLHttpRequest();\n\n              xhr.onload = function () {\n                resolve(xhr.response);\n              };\n\n              xhr.onerror = function (error) {\n                reject(new TypeError('Network request failed'));\n              };\n\n              xhr.responseType = 'blob';\n              xhr.open('GET', videoUri, true);\n              xhr.send(null);\n            }));\n\n          case 8:\n            blob = _context5.sent;\n            _context5.next = 11;\n            return _regeneratorRuntime.awrap(axios({\n              method: 'post',\n              url: 'https://gentle-brook-91508.herokuapp.com/muxAuthenticatedUrl',\n              data: {\n                \"passthroughId\": passthroughId\n              }\n            }));\n\n          case 11:\n            res = _context5.sent;\n            authenticatedUrl = res.data.url;\n            status = res.data.status;\n            _context5.next = 16;\n            return _regeneratorRuntime.awrap(insertInitVideo({\n              variables: {\n                questionId: questionId,\n                userId: userId,\n                passthroughId: passthroughId,\n                status: status\n              }\n            }).then().catch(function (error) {\n              Sentry.captureException(error);\n            }));\n\n          case 16:\n            _context5.prev = 16;\n            _context5.next = 19;\n            return _regeneratorRuntime.awrap(fetch(authenticatedUrl, {\n              method: 'PUT',\n              body: blob,\n              headers: {\n                \"content-type\": blob.type\n              }\n            }));\n\n          case 19:\n            _context5.next = 26;\n            break;\n\n          case 21:\n            _context5.prev = 21;\n            _context5.t0 = _context5[\"catch\"](16);\n            tempUploadedVideos = uploadedVideos.map(function (uploadedVideo) {\n              if (uploadedVideo.passthroughId == passthroughId) {\n                return _objectSpread(_objectSpread({}, uploadedVideo), {}, {\n                  status: \"errored\"\n                });\n              } else {\n                return uploadedVideo;\n              }\n            });\n            setUploadedVideos(tempUploadedVideos);\n            Sentry.captureException(_context5.t0);\n\n          case 26:\n            blob.close();\n            timestamp = new Date();\n            updateLastUploaded({\n              variables: {\n                userId: userId,\n                timestamp: timestamp\n              }\n            });\n\n          case 29:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[16, 21]], Promise);\n  }\n\n  function VideoSection(_ref5) {\n    var videos = _ref5.videos;\n    return React.createElement(View, {\n      style: styles.videoSectionStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 13\n      }\n    }, videos.map(function (video) {\n      return React.createElement(VideoView, {\n        key: video.id,\n        video: video,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 38\n        }\n      });\n    }));\n  }\n\n  function LastDayVideosSubtitle(_ref6) {\n    var videosLength = _ref6.videosLength;\n\n    if (videosLength == 0) {\n      return null;\n    } else {\n      return React.createElement(Text, {\n        style: styles.sectionSubtitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 17\n        }\n      }, \"Add videos to stay on top of the feed\");\n    }\n  }\n\n  function Name() {\n    if (name == '') {\n      return React.createElement(TouchableOpacity, {\n        onPress: goToEditName,\n        style: styles.namePadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.tapToAddName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }\n      }, \"Tap to add name\"));\n    } else {\n      return React.createElement(View, {\n        style: styles.namePadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 21\n        }\n      }, name));\n    }\n  }\n\n  function Bio() {\n    if (bio == '') {\n      return React.createElement(TouchableOpacity, {\n        onPress: goToEditBio,\n        style: styles.bioPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.bio,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 21\n        }\n      }, \"Tap to add bio\"));\n    } else {\n      return React.createElement(View, {\n        style: styles.bioPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.bio,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }\n      }, bio));\n    }\n  }\n\n  function goToEditName() {\n    props.navigation.navigate('Name', {\n      name: name\n    });\n  }\n\n  function goToEditBio() {\n    props.navigation.navigate('Bio', {\n      bio: bio\n    });\n  }\n\n  function goToEditProfile() {\n    props.navigation.navigate(\"Edit profile\", {\n      name: name,\n      bio: bio\n    });\n  }\n\n  function goToNewVideos() {\n    var title = 'New Videos';\n    props.navigation.navigate('VideosDetail', {\n      title: title,\n      videos: lastDayVideos\n    });\n  }\n\n  function goToBestVideos() {\n    var title = 'Your Best Videos';\n    props.navigation.navigate('VideosDetail', {\n      title: title,\n      videos: bestVideos\n    });\n  }\n\n  function goToAverageVideos() {\n    var title = 'Your Good Videos';\n    props.navigation.navigate('VideosDetail', {\n      title: title,\n      videos: averageVideos\n    });\n  }\n\n  function goToWorstVideos() {\n    var title = 'Your Not-So-Great Videos';\n    props.navigation.navigate('VideosDetail', {\n      title: title,\n      videos: worstVideos\n    });\n  }\n\n  function EditProfileButton() {\n    return React.createElement(TouchableOpacity, {\n      onPress: goToEditProfile,\n      style: styles.editProfileButtonStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: styles.editProfileText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 17\n      }\n    }, \"Edit Profile\"));\n  }\n\n  function openSettings() {\n    setSettingsVisible(true);\n  }\n\n  function SectionTitle(_ref7) {\n    var text = _ref7.text,\n        videos = _ref7.videos;\n\n    if (videos.length > 0) {\n      return React.createElement(View, {\n        style: styles.titleView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 21\n        }\n      }, text), React.createElement(Entypo, {\n        name: \"chevron-right\",\n        color: colors.primaryWhite,\n        size: 17,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return null;\n    }\n  }\n\n  function BestVideoSubtitle() {\n    if (bestVideos.length > 0) {\n      return React.createElement(Text, {\n        style: styles.sectionSubtitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 17\n        }\n      }, \"We show your best videos to each user.\");\n    } else {\n      return null;\n    }\n  }\n\n  var styles = StyleSheet.create({\n    thumbnailPaddingStyle: {\n      padding: thumbnailPadding\n    },\n    thumbnailDimensions: {\n      width: thumbnailWidth,\n      height: thumbnailHeight\n    },\n    activityView: {\n      backgroundColor: '#000',\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    thumbnailDimensionsFlexEnd: {\n      width: thumbnailWidth,\n      height: thumbnailHeight,\n      justifyContent: 'flex-end'\n    },\n    videoViews: {\n      flexDirection: 'row',\n      padding: 4,\n      alignItems: 'center'\n    },\n    videoViewsText: {\n      color: colors.secondaryWhite,\n      paddingLeft: 2,\n      fontSize: 14\n    },\n    goToAddPageStyle: {\n      backgroundColor: colors.secondaryBlack,\n      width: thumbnailWidth,\n      height: thumbnailHeight,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    videoSectionStyle: {\n      flex: 1,\n      flexDirection: 'row'\n    },\n    sectionSubtitles: {\n      color: colors.secondaryWhite\n    },\n    tapToAddName: {\n      fontWeight: '600',\n      fontSize: 20,\n      color: colors.primaryWhite\n    },\n    title: {\n      fontWeight: 'bold',\n      fontSize: 20,\n      color: colors.primaryWhite\n    },\n    namePadding: {\n      padding: 15\n    },\n    bioPadding: {\n      paddingBottom: 25\n    },\n    bio: {\n      fontWeight: '200',\n      fontSize: 14,\n      color: colors.primaryWhite\n    },\n    editProfileButtonStyle: {\n      borderWidth: 1,\n      borderRadius: 3,\n      height: 30,\n      width: 130,\n      justifyContent: 'center',\n      alignItems: 'center',\n      borderColor: colors.primaryWhite\n    },\n    editProfileText: {\n      fontSize: 16,\n      fontWeight: '200',\n      color: colors.primaryWhite\n    },\n    explanationPadding: {\n      paddingHorizontal: 40,\n      paddingVertical: 30\n    },\n    titleView: {\n      flexDirection: 'row',\n      alignItems: 'flex-end'\n    },\n    scrollViewStyle: {\n      flex: 1,\n      backgroundColor: colors.primaryBlack\n    },\n    viewFlexStart: {\n      justifyContent: 'flex-start'\n    },\n    headerContainer: {\n      alignItems: 'center'\n    },\n    thumbnailPaddingTop: {\n      paddingTop: 10,\n      paddingLeft: thumbnailPadding\n    },\n    thumbnailPaddingTop2: {\n      paddingTop: 30,\n      paddingLeft: thumbnailPadding\n    },\n    settingsContainer: {\n      position: \"absolute\",\n      top: 50,\n      right: 15\n    },\n    badInternetView: {\n      backgroundColor: '#000',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flex: 1\n    },\n    reloadText: {\n      color: '#eee',\n      fontSize: 20,\n      paddingHorizontal: 20,\n      paddingVertical: 5\n    }\n  });\n\n  function Settings() {\n    if ('ios' in Constants.platform) {\n      return React.createElement(TouchableOpacity, {\n        onPress: openSettings,\n        style: styles.settingsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"menu\",\n        color: colors.secondaryWhite,\n        size: 30,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return React.createElement(TouchableOpacity, {\n        onPress: pressSignOut,\n        style: styles.settingsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialCommunityIcons, {\n        name: \"location-exit\",\n        size: 30,\n        color: colors.secondaryWhite,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  if (initialized) {\n    return React.createElement(ScrollView, {\n      style: styles.scrollViewStyle,\n      refreshControl: React.createElement(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh,\n        tintColor: '#eee',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 33\n        }\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: styles.viewFlexStart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: styles.headerContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 21\n      }\n    }, React.createElement(Name, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 25\n      }\n    }), React.createElement(Bio, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 25\n      }\n    }), React.createElement(EditProfileButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: styles.thumbnailPaddingTop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 21\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: goToNewVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 25\n      }\n    }, React.createElement(View, {\n      style: styles.titleView,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 29\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 33\n      }\n    }, \"New Videos\"), React.createElement(Entypo, {\n      name: \"chevron-right\",\n      color: colors.primaryWhite,\n      size: 17,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 33\n      }\n    })), React.createElement(LastDayVideosSubtitle, {\n      videosLength: lastDayVideos.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 29\n      }\n    })), React.createElement(VideoSection, {\n      videos: lastDayVideos.slice(0, 3),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 25\n      }\n    }), React.createElement(VideoSection, {\n      videos: lastDayVideos.slice(3, 6),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: styles.thumbnailPaddingTop2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 21\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.titleView,\n      onPress: goToBestVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 25\n      }\n    }, React.createElement(SectionTitle, {\n      text: 'Best Videos',\n      videos: bestVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 29\n      }\n    })), React.createElement(BestVideoSubtitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 25\n      }\n    }), React.createElement(VideoSection, {\n      videos: bestVideos.slice(0, 3),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 25\n      }\n    }), React.createElement(VideoSection, {\n      videos: bestVideos.slice(3, 6),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: styles.thumbnailPaddingTop2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 21\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.titleView,\n      onPress: goToAverageVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 25\n      }\n    }, React.createElement(SectionTitle, {\n      text: 'Good Videos',\n      videos: averageVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 29\n      }\n    })), React.createElement(VideoSection, {\n      videos: averageVideos.slice(0, 3),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 25\n      }\n    }), React.createElement(VideoSection, {\n      videos: averageVideos.slice(3, 6),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 25\n      }\n    })), React.createElement(View, {\n      style: styles.thumbnailPaddingTop2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 21\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.titleView,\n      onPress: goToWorstVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 25\n      }\n    }, React.createElement(SectionTitle, {\n      text: 'Not-So-Great Videos',\n      videos: worstVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 29\n      }\n    })), React.createElement(VideoSection, {\n      videos: worstVideos.slice(0, 3),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 25\n      }\n    }), React.createElement(VideoSection, {\n      videos: worstVideos.slice(3, 6),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 25\n      }\n    }))), React.createElement(Settings, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 17\n      }\n    }), React.createElement(SettingsPopup, {\n      visible: settingsVisible,\n      setVisible: setSettingsVisible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 17\n      }\n    }));\n  } else {\n    if (timedOut) {\n      return React.createElement(View, {\n        style: styles.badInternetView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          borderWidth: 1,\n          borderColor: '#eee',\n          justifyContent: 'center',\n          borderRadius: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.reloadText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 25\n        }\n      }, \"We're losing you. Please check your network connection.\")));\n    } else {\n      return React.createElement(View, {\n        style: styles.activityView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 17\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"small\",\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 19\n        }\n      }));\n    }\n  }\n}","map":{"version":3,"sources":["/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/videosPage/VideosView.tsx"],"names":["React","useEffect","useState","useContext","Segment","GET_LAST_DAY_VIDEOS","INSERT_INIT_VIDEO","UPDATE_LAST_UPLOADED","ON_VIDEO_UPDATED","GET_PAST_VIDEOS","DELETE_VIDEO_PASSTHROUGH_ID","UPDATE_VIDEO_ERRORED","UserIdContext","ScrollView","useMutation","useSubscription","useLazyQuery","FullPageVideos","_retrieveName","_retrieveBio","axios","Ionicons","MaterialIcons","Entypo","SimpleLineIcons","MaterialCommunityIcons","colors","SettingsPopup","Sentry","Constants","useDoormanUser","_clearDoormanUid","_clearOnboarded","_clearUserId","_clearBio","_clearName","VideosView","props","lastDayVideos","setLastDayVideos","storedLastDayVideos","setStoredLastDayVideos","userId","setUserId","insertInitVideo","insertInitVideoData","updateLastUploaded","updateLastUploadedData","deleteVideoPassthrough","deleteVideoPassthroughData","updateVideoErrored","updateVideoErroredData","uploadedVideos","setUploadedVideos","name","setName","bio","setBio","initialized","setInitialized","settingsVisible","setSettingsVisible","timedOut","setTimedOut","bestVideos","setBestVideos","averageVideos","setAverageVideos","worstVideos","setWorstVideos","yesterday","Date","now","thumbnailPadding","length","signOut","pressSignOut","onCompleted","storedLastDayVideosData","videos","getStoredLastDayVideos","data","getPastVideosData","initPastVideos","getPastVideos","wait","timeout","Promise","resolve","setTimeout","refreshing","setRefreshing","onRefresh","useCallback","variables","then","screen","initProfile","navigation","addListener","params","route","undefined","postVideo","blankVideo","type","id","videoData","filter","video","rank","windowWidth","Math","round","Dimensions","get","width","thumbnailWidth","thumbnailHeight","goToAddPage","navigate","VideoView","UploadingView","uploadingVideo","goToVideo","setFullVideoVisible","VideoSubscription","passthroughId","loading","error","status","tempUploadedVideos","map","uploadedVideo","fullVideoVisible","setStatus","questionText","questionId","thumbnailUri","videoUri","reuploadVideo","uploadedVideosFiltered","newPassthroughId","floor","random","toString","videoId","styles","thumbnailPaddingStyle","thumbnailDimensions","uri","removeVideo","activityView","color","fontSize","IndividualVideoView","muxPlaybackId","videoQuestion","muxPlaybackUrl","total","likes","dislikes","thumbnailDimensionsFlexEnd","videoViews","secondaryWhite","videoViewsText","BlankVideoView","goToAddPageStyle","trackWithProperties","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","blob","method","url","res","authenticatedUrl","catch","captureException","fetch","body","headers","close","timestamp","VideoSection","videoSectionStyle","LastDayVideosSubtitle","videosLength","sectionSubtitles","Name","goToEditName","namePadding","tapToAddName","title","Bio","goToEditBio","bioPadding","goToEditProfile","goToNewVideos","goToBestVideos","goToAverageVideos","goToWorstVideos","EditProfileButton","editProfileButtonStyle","editProfileText","openSettings","SectionTitle","text","titleView","primaryWhite","BestVideoSubtitle","StyleSheet","create","padding","height","backgroundColor","flex","justifyContent","alignItems","flexDirection","paddingLeft","secondaryBlack","fontWeight","paddingBottom","borderWidth","borderRadius","borderColor","explanationPadding","paddingHorizontal","paddingVertical","scrollViewStyle","primaryBlack","viewFlexStart","headerContainer","thumbnailPaddingTop","paddingTop","thumbnailPaddingTop2","settingsContainer","position","top","right","badInternetView","reloadText","Settings","platform","slice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { View, Image, Text, TouchableOpacity, ImageBackground, ActivityIndicator, StyleSheet, RefreshControl } from 'react-native';\nimport * as Segment from 'expo-analytics-segment';\nimport { Dimensions } from \"react-native\"; \nimport { GET_LAST_DAY_VIDEOS, INSERT_INIT_VIDEO, UPDATE_LAST_UPLOADED, ON_VIDEO_UPDATED, GET_PAST_VIDEOS, DELETE_VIDEO_PASSTHROUGH_ID, UPDATE_VIDEO_ERRORED } from '../../utils/graphql/GraphqlClient';\nimport { UserIdContext } from '../../utils/context/UserIdContext'\nimport { ScrollView } from 'react-native-gesture-handler';\nimport { useMutation, useSubscription, useLazyQuery } from '@apollo/client';\nimport FullPageVideos from '../modals/FullPageVideos';\nimport { _retrieveName, _retrieveBio } from '../../utils/asyncStorage'; \nimport axios from 'axios';\nimport { Ionicons, MaterialIcons, Entypo, SimpleLineIcons, MaterialCommunityIcons } from '@expo/vector-icons'\nimport { colors } from '../../styles/colors'; \nimport SettingsPopup from '../modals/SettingsPopup';\nimport * as Sentry from 'sentry-expo'; \nimport Constants from 'expo-constants';\nimport { useDoormanUser } from 'react-native-doorman'\nimport { _clearDoormanUid, _clearOnboarded, _clearUserId, _clearBio, _clearName } from '../../utils/asyncStorage'; \n\nexport default function VideosView(props) {\n\n    const [lastDayVideos, setLastDayVideos] = useState([]); \n    const [storedLastDayVideos, setStoredLastDayVideos] = useState([]);\n    const [userId, setUserId] = useContext(UserIdContext);\n    const [insertInitVideo, { insertInitVideoData }] = useMutation(INSERT_INIT_VIDEO); \n    const [updateLastUploaded, { updateLastUploadedData }] = useMutation(UPDATE_LAST_UPLOADED);\n    const [deleteVideoPassthrough, { deleteVideoPassthroughData }] = useMutation(DELETE_VIDEO_PASSTHROUGH_ID); \n    const [updateVideoErrored, { updateVideoErroredData }] = useMutation(UPDATE_VIDEO_ERRORED); \n\n    const [uploadedVideos, setUploadedVideos] = useState([]); \n    const [name, setName] = useState(''); \n    const [bio, setBio] = useState(''); \n    const [initialized, setInitialized] = useState(false); \n    const [settingsVisible, setSettingsVisible] = useState(false); \n    const [timedOut, setTimedOut] = useState(false);\n\n    const [bestVideos, setBestVideos] = useState([]);\n    const [averageVideos, setAverageVideos] = useState([]);\n    const [worstVideos, setWorstVideos] = useState([]);\n\n    const yesterday = new Date(Date.now() - 86400000); \n    const thumbnailPadding = '0.2%'; \n    const length = 110; \n\n    const { signOut } = useDoormanUser();\n\n    const pressSignOut = async () => {\n        await _clearDoormanUid();\n        await _clearOnboarded(); \n        await _clearUserId();  \n        await _clearBio();\n        await _clearName(); \n        signOut();\n    }\n\n\n    const [getStoredLastDayVideos, { data: storedLastDayVideosData }] = useLazyQuery(GET_LAST_DAY_VIDEOS, \n    { \n        onCompleted: (storedLastDayVideosData) => { setStoredLastDayVideos(storedLastDayVideosData.videos) } \n    }); \n\n    const [getPastVideos, { data: getPastVideosData }] = useLazyQuery(GET_PAST_VIDEOS, \n    { \n        onCompleted: (getPastVideosData) => { initPastVideos(getPastVideosData.videos) } \n    }); \n\n\n    function wait(timeout) {\n        return new Promise(resolve => {\n          setTimeout(resolve, timeout);\n        });\n    }\n\n    const [refreshing, setRefreshing] = React.useState(false);\n\n    const onRefresh = React.useCallback(() => {\n        setRefreshing(true);\n\n        getStoredLastDayVideos({variables: { userId, yesterday}}); \n        getPastVideos({variables: { userId, yesterday}}); \n\n        wait(2000).then(() => setRefreshing(false));\n    }, [refreshing]);\n\n    useEffect(() => {\n        Segment.screen('Videos'); \n        getStoredLastDayVideos({variables: { userId, yesterday}}); \n        getPastVideos({variables: { userId, yesterday}}); \n        initProfile(); \n        setTimeout(() => { setTimedOut(true) }, 3000); \n    }, [])\n\n    useEffect(() => {\n        props.navigation.addListener('focus', () => {\n            initProfile(); \n        });  \n      }, [props.navigation]);\n\n    async function initProfile(){\n        const name = await _retrieveName(); \n        const bio = await _retrieveBio(); \n        setName(name);\n        setBio(bio);\n    }\n\n    // changes in routes\n    useEffect(() => {\n        const params = props.route.params;\n        if (params != undefined){\n            setUploadedVideos([params, ...uploadedVideos]);\n            postVideo(params);\n        }\n    }, [props.route])\n\n    useEffect(() => {\n        const blankVideo = { type: 'blankVideo', id: 0 }\n        setLastDayVideos([blankVideo, ...uploadedVideos, ...storedLastDayVideos]); \n    }, [storedLastDayVideos, uploadedVideos])\n\n    function initPastVideos(videoData){\n        setBestVideos(videoData.filter(video => { return video.rank == 1 }));\n        setAverageVideos(videoData.filter(video => { return video.rank == 2 }));\n        setWorstVideos(videoData.filter(video => { return video.rank == 3 }));\n        setInitialized(true); \n    }\n\n    const windowWidth = Math.round(Dimensions.get('window').width);\n    const thumbnailWidth = windowWidth * 0.33; \n    const thumbnailHeight = windowWidth * 0.4; \n\n    function goToAddPage(){\n        props.navigation.navigate('Add');\n    }\n\n    function VideoView({ video }){\n        if(video.type == 'blankVideo') {\n            return <BlankVideoView /> \n        } else if(video.type == 'uploadedVideo'){\n            return <UploadingView uploadingVideo={video} />\n        } else {\n            return <IndividualVideoView video={video} />\n        }\n    }\n\n    function UploadingView({ uploadingVideo }){\n\n        function goToVideo(){\n            setFullVideoVisible(true); \n        }\n\n        function VideoSubscription({passthroughId}){\n            const { data, loading, error } = useSubscription(ON_VIDEO_UPDATED, {variables: { passthroughId : passthroughId }}); \n            if(loading){\n                return null; \n            } \n            \n            if(error || !data) {\n                return null; \n            }\n\n            if(data){\n                const videos = data.videos; \n                if(videos.length > 0){\n                    const videoData = videos[0];\n                    const status = videoData.status;\n                    if(status == \"preparing\" || status == \"ready\"){ \n                        const tempUploadedVideos = uploadedVideos.map(uploadedVideo => {\n                            if(uploadedVideo.passthroughId == passthroughId && uploadedVideo.status != \"errored\"){\n                                return {...uploadedVideo, status: status, id: videoData.id}\n                            } else { return uploadedVideo }\n                        })\n                        setUploadedVideos(tempUploadedVideos); \n                    } else if (status == \"errored\"){\n                        const tempUploadedVideos = uploadedVideos.map(uploadedVideo => {\n                            if(uploadedVideo.passthroughId == passthroughId){\n                                return {...uploadedVideo, status: status, id: videoData.id}\n                            } else { return uploadedVideo }\n                        })\n                        setUploadedVideos(tempUploadedVideos); \n                    }\n                }\n            }\n\n            return null; \n        }\n    \n        const [fullVideoVisible, setFullVideoVisible] = useState(false);\n        const [status, setStatus] = useState(uploadingVideo.status);\n        const questionText = uploadingVideo.questionText;\n        const questionId = uploadingVideo.questionId; \n        const thumbnailUri = uploadingVideo.thumbnailUri;\n        const videoUri = uploadingVideo.videoUri; \n        const passthroughId = uploadingVideo.passthroughId; \n        const id = uploadingVideo.id; \n\n        async function reuploadVideo(){\n\n            const uploadedVideosFiltered = uploadedVideos.filter(video => { return video.id !== id })\n            deleteVideoPassthrough({ variables: { passthroughId: passthroughId }}); \n\n            const newPassthroughId = Math.floor(Math.random() * 1000000000) + 1; \n\n            const params = {\n                questionText: questionText,\n                questionId: questionId, \n                thumbnailUri: thumbnailUri,\n                videoUri: videoUri,\n                passthroughId:  newPassthroughId.toString(),\n                status: 'waiting',\n                type: 'uploadedVideo',\n                id: newPassthroughId, \n                videoId: null\n            }; \n\n            setUploadedVideos([params, ...uploadedVideosFiltered]);\n            postVideo(params);\n        };\n\n\n        if (status == \"ready\" || status == \"preparing\"){\n            return(\n                <View style={styles.thumbnailPaddingStyle}>\n                    <TouchableOpacity onPress={goToVideo}>\n                        <Image \n                            style={styles.thumbnailDimensions}\n                            source={{uri: thumbnailUri }}\n                        />\n                    </TouchableOpacity>\n                    <FullPageVideos \n                        visible={fullVideoVisible} \n                        setVisible={setFullVideoVisible} \n                        source={videoUri}\n                        questionText={questionText}\n                        showOptions={true}\n                        videoId={id}\n                        removeVideo={removeVideo}\n                    />\n                </View>\n            )\n        } else if(status == \"errored\") {\n            return (\n                <TouchableOpacity onPress={reuploadVideo} style={styles.thumbnailPaddingStyle}>\n                    <ImageBackground\n                        style={styles.thumbnailDimensions}\n                        source={{uri: thumbnailUri}}\n                    >\n                        <View style={styles.activityView}>\n                            <Ionicons name=\"ios-refresh\" color={\"#eee\"} size={40} />\n                            <Text style={{ color: '#eee', fontSize: 16 }}>Upload failed</Text>\n                        </View>\n                    </ImageBackground>\n                    <VideoSubscription passthroughId={passthroughId} />\n                </TouchableOpacity>\n\n            )\n        } else {\n            return (\n                <View style={styles.thumbnailPaddingStyle}>\n                    <ImageBackground\n                        style={styles.thumbnailDimensions}\n                        source={{uri: thumbnailUri}}\n                    >\n                        <View style={styles.activityView}>\n                            <ActivityIndicator size=\"small\" color=\"#eee\" />\n                        </View>\n                    </ImageBackground>\n                    <VideoSubscription passthroughId={passthroughId} />\n                </View>\n\n            )\n        }\n    }\n\n    async function removeVideo(videoId){\n        setUploadedVideos(uploadedVideos.filter(video => { return video.id !== videoId })); \n        setStoredLastDayVideos(storedLastDayVideos.filter(video => { return video.id !== videoId }));\n        setBestVideos(bestVideos.filter(video => { return video.id !== videoId }));\n        setAverageVideos(averageVideos.filter(video => { return video.id !== videoId }));\n        setWorstVideos(worstVideos.filter(video => { return video.id !== videoId }));\n    }\n\n    function IndividualVideoView({ video }){\n        function goToVideo(){\n            setFullVideoVisible(true); \n        }\n\n    \n        const [fullVideoVisible, setFullVideoVisible] = useState(false);\n        const [status, setStatus] = useState(\"ready\"); \n        const muxPlaybackId = video.muxPlaybackId;\n        const questionText = video.videoQuestion ? video.videoQuestion.questionText : \"\"; \n        const muxPlaybackUrl = 'https://image.mux.com/' + muxPlaybackId + '/thumbnail.jpg?time=0';\n        const total = video.likes + video.dislikes; \n\n        if(status == \"ready\"){\n            return(\n                <View style={styles.thumbnailPaddingStyle}>\n                    <TouchableOpacity onPress={goToVideo}>\n                        <ImageBackground \n                            style={styles.thumbnailDimensionsFlexEnd}\n                            source={{uri: muxPlaybackUrl }}\n                        >\n                            <View style={styles.videoViews}>\n                                <SimpleLineIcons name=\"control-play\" color={colors.secondaryWhite} size={14}/>\n                                <Text style={styles.videoViewsText}>{total}</Text>\n                            </View>\n                        </ImageBackground>\n                    </TouchableOpacity>\n                    <FullPageVideos\n                        visible={fullVideoVisible}\n                        setVisible={setFullVideoVisible}\n                        source={'https://stream.mux.com/' + muxPlaybackId + '.m3u8'}\n                        questionText={questionText}\n                        likes={video.likes}\n                        views={total}\n                        showOptions={true}\n                        videoId={video.id}\n                        removeVideo={removeVideo}\n                    />\n                </View>\n            )\n        } else {\n            return null; \n        }\n\n    }\n\n    function BlankVideoView(){\n        return(\n            <View style={styles.thumbnailPaddingStyle}>\n                <TouchableOpacity onPress={goToAddPage} style={styles.goToAddPageStyle}>\n                    <Ionicons name=\"ios-add\" color={\"#eee\"} size={60} />\n                </TouchableOpacity>\n            </View>\n        )\n    }\n\n    async function postVideo(params){\n        const questionText = params.questionText;\n        const questionId = params.questionId; \n        const thumbnailUri = params.thumbnailUri;\n        const videoUri = params.videoUri; \n        const passthroughId = params.passthroughId; \n\n        \n        Segment.trackWithProperties(\"Upload Video\", { questionId: questionId}); \n\n        // Create a blob from the videoUri\n        const blob = await new Promise((resolve, reject) => {\n            const xhr = new XMLHttpRequest(); \n            xhr.onload = () => {\n                resolve(xhr.response);\n            };\n            xhr.onerror = (error) => {\n                reject(new TypeError('Network request failed'));\n            };\n            xhr.responseType = 'blob'; \n            xhr.open('GET', videoUri, true); \n            xhr.send(null); \n        });\n\n        const res = await axios({\n            method: 'post', \n            url: 'https://gentle-brook-91508.herokuapp.com/muxAuthenticatedUrl',\n            data: { \"passthroughId\" : passthroughId }\n          }); \n\n        const authenticatedUrl = res.data.url;\n        const status = res.data.status;\n\n        await insertInitVideo({ variables: { questionId: questionId, userId: userId, passthroughId: passthroughId, status: status }})\n        .then()\n        .catch(error => {\n            Sentry.captureException(error);\n        }); \n\n        try {\n            await fetch(authenticatedUrl, {\n                method: 'PUT', \n                body: blob, \n                headers: { \"content-type\": blob.type}\n            });        \n        } catch(error){\n            const tempUploadedVideos = uploadedVideos.map(uploadedVideo => {\n                if(uploadedVideo.passthroughId == passthroughId){\n                    return {...uploadedVideo, status: \"errored\"}\n                } else { return uploadedVideo }\n            })\n            setUploadedVideos(tempUploadedVideos); \n            Sentry.captureException(error);\n        }\n\n        blob.close();\n\n        const timestamp = new Date(); \n        updateLastUploaded({ variables: {userId: userId, timestamp: timestamp}});\n    }\n\n    function VideoSection ({ videos }) {        \n        return (\n            <View style={styles.videoSectionStyle}>\n                {videos.map(video => <VideoView key={video.id} video={video} />)}\n            </View>\n        )\n    }\n\n    function LastDayVideosSubtitle({ videosLength }) {\n        if(videosLength == 0){\n            return null;\n        } else {\n            return (\n                <Text style={styles.sectionSubtitles}>Add videos to stay on top of the feed</Text>\n            )\n        }\n    }\n\n\n    function Name () {\n        if(name == ''){\n            return (\n                <TouchableOpacity onPress={goToEditName} style={styles.namePadding}>\n                    <Text style={styles.tapToAddName}>Tap to add name</Text>\n                </TouchableOpacity>\n            )\n        } else {\n            return (\n                <View style={styles.namePadding}>\n                    <Text style={styles.title}>{name}</Text>\n                </View>\n            )\n        }\n    }\n\n    function Bio (){\n        if(bio == ''){\n            return (\n                <TouchableOpacity onPress={goToEditBio} style={styles.bioPadding}>\n                    <Text style={styles.bio}>Tap to add bio</Text>\n                </TouchableOpacity>\n            )\n        } else {\n            return (\n                <View style={styles.bioPadding}>\n                    <Text style={styles.bio}>{bio}</Text>\n                </View>\n            )\n        }\n    }\n\n    function goToEditName(){\n        props.navigation.navigate('Name', {name});\n    }\n\n    function goToEditBio(){\n        props.navigation.navigate('Bio', {bio}); \n    }\n\n    function goToEditProfile(){\n        props.navigation.navigate(\"Edit profile\", {name, bio});\n    }\n\n    function goToNewVideos(){\n        const title = 'New Videos'; \n        props.navigation.navigate('VideosDetail', {title, videos: lastDayVideos}); \n    }\n\n    function goToBestVideos(){\n        const title = 'Your Best Videos'; \n        props.navigation.navigate('VideosDetail', {title, videos: bestVideos});\n    }\n\n    function goToAverageVideos(){\n        const title = 'Your Good Videos'; \n        props.navigation.navigate('VideosDetail', {title, videos: averageVideos});\n    }\n\n    function goToWorstVideos(){\n        const title = 'Your Not-So-Great Videos'; \n        props.navigation.navigate('VideosDetail', {title, videos: worstVideos});\n    }\n\n    function EditProfileButton () {\n        return (\n            <TouchableOpacity onPress={goToEditProfile} style={styles.editProfileButtonStyle}>\n                <Text style={styles.editProfileText}>Edit Profile</Text>\n            </TouchableOpacity>\n        )\n    }\n\n    function openSettings(){\n        setSettingsVisible(true); \n    }\n\n\n    function SectionTitle({text, videos}){\n        if(videos.length > 0){\n            return (\n                <View style={styles.titleView}>\n                    <Text style={styles.title}>{text}</Text>\n                    <Entypo name=\"chevron-right\" color={colors.primaryWhite} size={17}/>  \n                </View>\n            )    \n        } else {\n            return null; \n        }\n    }\n\n    function BestVideoSubtitle(){\n        if(bestVideos.length > 0){\n            return (\n                <Text style={styles.sectionSubtitles}>We show your best videos to each user.</Text>\n            )    \n        } else {\n            return null; \n        }\n    }\n\n\n    const styles = StyleSheet.create({\n        thumbnailPaddingStyle: { padding: thumbnailPadding},\n        thumbnailDimensions: { width: thumbnailWidth, height: thumbnailHeight },\n        activityView: { backgroundColor: '#000', flex: 1, justifyContent: 'center', alignItems: 'center' },\n        thumbnailDimensionsFlexEnd: { width: thumbnailWidth, height: thumbnailHeight, justifyContent: 'flex-end' },\n        videoViews: { flexDirection: 'row', padding: 4, alignItems: 'center'},\n        videoViewsText: { color: colors.secondaryWhite, paddingLeft: 2, fontSize: 14 },\n        goToAddPageStyle: {backgroundColor: colors.secondaryBlack, width: thumbnailWidth, height: thumbnailHeight, justifyContent: 'center', alignItems: 'center' },\n        videoSectionStyle: { flex: 1, flexDirection: 'row' },\n        sectionSubtitles: { color: colors.secondaryWhite },\n        tapToAddName: { fontWeight: '600', fontSize: 20, color: colors.primaryWhite },\n        title: { fontWeight: 'bold', fontSize: 20, color: colors.primaryWhite },\n        namePadding: { padding: 15},\n        bioPadding: { paddingBottom: 25},\n        bio: { fontWeight: '200', fontSize: 14, color: colors.primaryWhite },\n        editProfileButtonStyle: {  borderWidth: 1, borderRadius: 3, height: 30, width: 130, justifyContent: 'center', alignItems: 'center', borderColor: colors.primaryWhite},\n        editProfileText: { fontSize: 16, fontWeight: '200', color: colors.primaryWhite  },\n        explanationPadding: { paddingHorizontal: 40, paddingVertical: 30 },\n        titleView: { flexDirection: 'row', alignItems: 'flex-end'},\n        scrollViewStyle: { flex: 1, backgroundColor: colors.primaryBlack },\n        viewFlexStart: { justifyContent: 'flex-start'},\n        headerContainer: { alignItems: 'center'},\n        thumbnailPaddingTop: { paddingTop: 10, paddingLeft: thumbnailPadding },\n        thumbnailPaddingTop2: { paddingTop: 30, paddingLeft: thumbnailPadding },\n        settingsContainer: { position: \"absolute\", top: 50, right: 15},\n        badInternetView: { backgroundColor: '#000', justifyContent: 'center', alignItems: 'center', flex: 1},\n        reloadText: { color: '#eee', fontSize: 20, paddingHorizontal: 20, paddingVertical: 5}\n      \n    });\n\n    function Settings(){\n        if('ios' in Constants.platform){\n            return(\n                <TouchableOpacity onPress={openSettings} style={styles.settingsContainer}>\n                    <MaterialIcons name=\"menu\" color={colors.secondaryWhite} size={30}/>  \n                </TouchableOpacity>\n            )\n        } else {\n            return(\n                <TouchableOpacity onPress={pressSignOut} style={styles.settingsContainer}>\n                    <MaterialCommunityIcons name=\"location-exit\" size={30} color={colors.secondaryWhite}/>\n                </TouchableOpacity>\n            )            \n        }\n    }\n\n    if(initialized){\n        return (\n            <ScrollView \n                style={styles.scrollViewStyle}\n                refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} tintColor={'#eee'} />}\n            >\n                <View style={styles.viewFlexStart}>\n                    <View style={styles.headerContainer}>\n                        <Name />\n                        <Bio /> \n                        <EditProfileButton /> \n                    </View>\n                    <View style={styles.thumbnailPaddingTop}>\n                        <TouchableOpacity onPress={goToNewVideos}>\n                            <View style={styles.titleView}>\n                                <Text style={styles.title}>New Videos</Text>\n                                <Entypo name=\"chevron-right\" color={colors.primaryWhite} size={17}/>  \n                            </View>\n                            <LastDayVideosSubtitle videosLength={lastDayVideos.length} />\n                        </TouchableOpacity>\n                        <VideoSection videos={lastDayVideos.slice(0, 3)}/>\n                        <VideoSection videos={lastDayVideos.slice(3, 6)}  />\n                    </View>\n                    <View style={styles.thumbnailPaddingTop2}>\n                        <TouchableOpacity style={styles.titleView} onPress={goToBestVideos}>\n                            <SectionTitle text={'Best Videos'} videos={bestVideos} />\n                        </TouchableOpacity>\n                        <BestVideoSubtitle />\n                        <VideoSection videos={bestVideos.slice(0, 3)}  />\n                        <VideoSection videos={bestVideos.slice(3, 6)}  />\n                    </View>\n                    <View style={styles.thumbnailPaddingTop2}>\n                        <TouchableOpacity style={styles.titleView} onPress={goToAverageVideos}>\n                            <SectionTitle text={'Good Videos'} videos={averageVideos} />\n                        </TouchableOpacity>\n                        <VideoSection videos={averageVideos.slice(0, 3)}  />\n                        <VideoSection videos={averageVideos.slice(3, 6)}  />\n                    </View>\n                    <View style={styles.thumbnailPaddingTop2}>\n                        <TouchableOpacity style={styles.titleView} onPress={goToWorstVideos}>\n                            <SectionTitle text={'Not-So-Great Videos'} videos={worstVideos} />\n                        </TouchableOpacity>\n                        <VideoSection videos={worstVideos.slice(0, 3)}  />\n                        <VideoSection videos={worstVideos.slice(3, 6)}  />\n                    </View>\n                </View>\n                <Settings />\n                <SettingsPopup visible={settingsVisible} setVisible={setSettingsVisible} />\n            </ScrollView>\n        );\n    } else {\n        if(timedOut){\n            return (\n                <View style={styles.badInternetView}>\n                    <View style={{ borderWidth: 1, borderColor: '#eee', justifyContent: 'center', borderRadius: 5}}>\n                        <Text style={styles.reloadText}>We're losing you. Please check your network connection.</Text>          \n                    </View>\n                </View>\n              )\n        } else {\n            return (\n                <View style={styles.activityView}>\n                  <ActivityIndicator size=\"small\" color=\"#eee\" />\n                </View>\n            )     \n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}