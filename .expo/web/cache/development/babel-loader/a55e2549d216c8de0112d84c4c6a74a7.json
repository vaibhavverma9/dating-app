{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/addPage/AddCameraContents.tsx\";\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Camera } from 'expo-camera';\nimport { BlurView } from 'expo-blur';\nimport { fullPageVideoStyles } from \"../../styles/fullPageVideoStyles\";\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport * as Segment from 'expo-analytics-segment';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { Video } from 'expo-av';\nimport { addStyles } from \"../../styles/addStyles\";\nimport * as VideoThumbnails from 'expo-video-thumbnails';\nimport * as Linking from 'expo-linking';\nimport ViewAllPopup from \"../modals/ViewAllPopup\";\nimport { VideoCountContext } from \"../../utils/context/VideoCountContext\";\nimport Constants from 'expo-constants';\nexport default function AddCameraContents(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      questionData = _useState2[0],\n      setQuestionData = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasCameraPermission = _useState4[0],\n      setHasCameraPermission = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasAudioPermission = _useState6[0],\n      setHasAudioPermission = _useState6[1];\n\n  var _useState7 = useState(Camera.Constants.Type.back),\n      _useState8 = _slicedToArray(_useState7, 2),\n      type = _useState8[0],\n      setType = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      index = _useState10[0],\n      setIndex = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      videoUri = _useState12[0],\n      setVideoUri = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      thumbnailUri = _useState14[0],\n      setThumbnailUri = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      recording = _useState16[0],\n      setRecording = _useState16[1];\n\n  var _useState17 = useState(true),\n      _useState18 = _slicedToArray(_useState17, 2),\n      shouldPlay = _useState18[0],\n      setShouldPlay = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      initialized = _useState20[0],\n      setInitialized = _useState20[1];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      viewAllVisible = _useState22[0],\n      setViewAllVisible = _useState22[1];\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      timedOut = _useState24[0],\n      setTimedOut = _useState24[1];\n\n  var _useContext = useContext(VideoCountContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      videoCount = _useContext2[0],\n      setVideoCount = _useContext2[1];\n\n  useEffect(function () {\n    initQuestions(props.data);\n  }, [props.data]);\n  var camera = useRef(null);\n  useEffect(function () {\n    getAudioPermission();\n    getCameraPermission();\n    Segment.screen('Add');\n    setTimeout(function () {\n      setTimedOut(true);\n    }, 3000);\n  }, []);\n\n  function getCameraPermission() {\n    var _await$Permissions$ge, status;\n\n    return _regeneratorRuntime.async(function getCameraPermission$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.CAMERA));\n\n          case 2:\n            _await$Permissions$ge = _context.sent;\n            status = _await$Permissions$ge.status;\n            setHasCameraPermission(status === 'granted');\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n\n  function getAudioPermission() {\n    var _await$Permissions$ge2, status;\n\n    return _regeneratorRuntime.async(function getAudioPermission$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.AUDIO_RECORDING));\n\n          case 2:\n            _await$Permissions$ge2 = _context2.sent;\n            status = _await$Permissions$ge2.status;\n            setHasAudioPermission(status === 'granted');\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n\n  function askCameraPermission() {\n    var _await$Permissions$as, status;\n\n    return _regeneratorRuntime.async(function askCameraPermission$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n          case 2:\n            _await$Permissions$as = _context3.sent;\n            status = _await$Permissions$as.status;\n            setHasCameraPermission(status === 'granted');\n\n            if (status !== 'granted') {\n              sendToSettings();\n            }\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n\n  function askAudioPermission() {\n    var _await$Permissions$as2, status;\n\n    return _regeneratorRuntime.async(function askAudioPermission$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.AUDIO_RECORDING));\n\n          case 2:\n            _await$Permissions$as2 = _context4.sent;\n            status = _await$Permissions$as2.status;\n            setHasAudioPermission(status === 'granted');\n\n            if (status !== 'granted') {\n              sendToSettings();\n            }\n\n          case 6:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n\n  function sendToSettings() {\n    Linking.openURL('app-settings://');\n  }\n\n  useEffect(function () {\n    props.navigation.addListener('blur', function () {\n      setShouldPlay(false);\n\n      if ('android' in Constants.platform) {\n        setInitialized(false);\n        setTimedOut(false);\n        setTimeout(function () {\n          setTimedOut(false);\n        }, 3000);\n      }\n    });\n    props.navigation.addListener('focus', function () {\n      if ('android' in Constants.platform) {\n        setInitialized(true);\n        setTimeout(function () {\n          setTimedOut(true);\n        }, 3000);\n      }\n\n      setShouldPlay(true);\n\n      if (hasCameraPermission === false) {\n        getCameraPermission();\n      }\n\n      if (hasAudioPermission === false) {\n        getAudioPermission();\n      }\n    });\n  }, [props.navigation, hasAudioPermission, hasCameraPermission]);\n\n  function initQuestions(questionData) {\n    var date = new Date();\n    var weekday = date.getDay();\n    var filteredQuestions = questionData.questions.filter(function (question, index) {\n      if (index % 7 == weekday) {\n        return question;\n      }\n    });\n    setQuestionData(filteredQuestions);\n    setIndex(0);\n    setInitialized(true);\n  }\n\n  var goBack = function goBack() {\n    var rem = (index - 1) % questionData.length;\n\n    if (rem < 0) {\n      setIndex(rem + questionData.length);\n    } else {\n      setIndex(rem);\n    }\n  };\n\n  var goForward = function goForward() {\n    setIndex((index + 1) % questionData.length);\n  };\n\n  var pickVideo = function pickVideo() {\n    var result, _await$VideoThumbnail, uri;\n\n    return _regeneratorRuntime.async(function pickVideo$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            Segment.track(\"Pick Video\");\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(getPermissionAsync());\n\n          case 3:\n            _context5.prev = 3;\n            _context5.next = 6;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 6:\n            result = _context5.sent;\n\n            if (!(!result.cancelled && result.type == 'video')) {\n              _context5.next = 14;\n              break;\n            }\n\n            setVideoUri(result.uri);\n            _context5.next = 11;\n            return _regeneratorRuntime.awrap(VideoThumbnails.getThumbnailAsync(result.uri, {\n              time: 0\n            }));\n\n          case 11:\n            _await$VideoThumbnail = _context5.sent;\n            uri = _await$VideoThumbnail.uri;\n            setThumbnailUri(uri);\n\n          case 14:\n            if (!result.cancelled && result.type == 'image') {\n              alert('Sorry, please upload a video!');\n            }\n\n            _context5.next = 19;\n            break;\n\n          case 17:\n            _context5.prev = 17;\n            _context5.t0 = _context5[\"catch\"](3);\n\n          case 19:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[3, 17]], Promise);\n  };\n\n  function back() {\n    setVideoUri(\"\");\n    setThumbnailUri(\"\");\n  }\n\n  function setCameraType() {\n    setType(type === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back);\n  }\n\n  var getPermissionAsync = function getPermissionAsync() {\n    var _await$Permissions$as3, status;\n\n    return _regeneratorRuntime.async(function getPermissionAsync$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n          case 2:\n            _await$Permissions$as3 = _context6.sent;\n            status = _await$Permissions$as3.status;\n\n            if (status !== 'granted') {\n              alert('Sorry, we need camera roll permissions to make this work!');\n            }\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function record() {\n    var _recording, _await$VideoThumbnail2, uri;\n\n    return _regeneratorRuntime.async(function record$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            if (!camera) {\n              _context7.next = 11;\n              break;\n            }\n\n            setRecording(true);\n            _context7.next = 4;\n            return _regeneratorRuntime.awrap(camera.current.recordAsync());\n\n          case 4:\n            _recording = _context7.sent;\n            setVideoUri(_recording.uri);\n            _context7.next = 8;\n            return _regeneratorRuntime.awrap(VideoThumbnails.getThumbnailAsync(_recording.uri, {\n              time: 0\n            }));\n\n          case 8:\n            _await$VideoThumbnail2 = _context7.sent;\n            uri = _await$VideoThumbnail2.uri;\n            setThumbnailUri(uri);\n\n          case 11:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function stopRecording() {\n    return _regeneratorRuntime.async(function stopRecording$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            if (camera) {\n              setRecording(false);\n              camera.current.stopRecording();\n            }\n\n          case 1:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function RecordingIcon() {\n    if (recording) {\n      return React.createElement(View, {\n        style: styles.recordingIconSingle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"fiber-manual-record\",\n        onPress: stopRecording,\n        color: \"#FF0000\",\n        size: 60,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        style: styles.recordingIconMultiple,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: pickVideo,\n        style: styles.iconGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"video-library\",\n        color: \"#eee\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }\n      }), React.createElement(Text, {\n        style: styles.iconText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }\n      }, \"Library\")), React.createElement(MaterialIcons, {\n        name: \"fiber-manual-record\",\n        onPress: record,\n        color: \"#eee\",\n        size: 60,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: setCameraType,\n        style: styles.iconGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"switch-camera\",\n        color: \"#eee\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }\n      }), React.createElement(Text, {\n        style: styles.iconText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }\n      }, \"Reverse\")));\n    }\n  }\n\n  function sendVideo() {\n    var passthroughId;\n    return _regeneratorRuntime.async(function sendVideo$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            passthroughId = Math.floor(Math.random() * 1000000000) + 1;\n            console.log(videoUri, thumbnailUri, questionData[index].questionText, questionData[index].id, passthroughId.toString());\n            _context9.next = 4;\n            return _regeneratorRuntime.awrap(props.navigation.navigate('Videos', {\n              screen: 'VideosView',\n              params: {\n                videoUri: videoUri,\n                thumbnailUri: thumbnailUri,\n                questionText: questionData[index].questionText,\n                questionId: questionData[index].id,\n                status: 'waiting',\n                passthroughId: passthroughId.toString(),\n                type: 'uploadedVideo',\n                id: passthroughId,\n                videoId: null\n              }\n            }));\n\n          case 4:\n            setVideoUri('');\n            setThumbnailUri('');\n            setVideoCount(videoCount + 1);\n\n          case 7:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function viewAll() {\n    setViewAllVisible(true);\n  }\n\n  function EnableCameraButton() {\n    if (hasCameraPermission === null) {\n      return React.createElement(TouchableOpacity, {\n        onPress: askCameraPermission,\n        style: styles.cameraPermissionsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, \"Enable Camera Access\"));\n    } else if (hasCameraPermission === false) {\n      return React.createElement(TouchableOpacity, {\n        onPress: askCameraPermission,\n        style: styles.cameraPermissionsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }\n      }, \"Enable Camera Access\"));\n    } else {\n      return React.createElement(View, {\n        style: styles.cameraPermissionsPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionEnabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, \"Camera Access Enabled\"));\n    }\n  }\n\n  function EnableAudioButton() {\n    if (hasAudioPermission === null) {\n      return React.createElement(TouchableOpacity, {\n        onPress: askAudioPermission,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }\n      }, \"Enable Microphone Access\"));\n    } else if (hasAudioPermission === false) {\n      return React.createElement(TouchableOpacity, {\n        onPress: askAudioPermission,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }\n      }, \"Enable Microphone Access\"));\n    } else {\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionEnabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }\n      }, \"Microphone Access Enabled\"));\n    }\n  }\n\n  var onLoad = function onLoad(data) {\n    if (data.durationMillis > 30000) {\n      Alert.alert(\"Your video is too long!\", \"Videos must be less than 30 seconds long. Yours was \" + Math.ceil(data.durationMillis / 1000) + \" seconds :(\", [{\n        text: \"Ok\",\n        onPress: function onPress() {\n          setVideoUri('');\n          setThumbnailUri('');\n        }\n      }], {\n        cancelable: false\n      });\n    }\n  };\n\n  if (initialized) {\n    if (hasCameraPermission !== true || hasAudioPermission !== true) {\n      return React.createElement(View, {\n        style: styles.permissionsViewBackground,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.permissionsTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, \"Share on Realtalk\"), React.createElement(Text, {\n        style: styles.permissionsSubtitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }\n      }, \"Enable access so you can start taking videos.\"), React.createElement(EnableCameraButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }\n      }), React.createElement(EnableAudioButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }\n      }));\n    }\n\n    if (videoUri == \"\") {\n      return React.createElement(View, {\n        style: styles.viewBackground,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, React.createElement(Camera, {\n        style: styles.cameraFlex,\n        type: type,\n        ref: camera,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: styles.cameraView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 25\n        }\n      }, React.createElement(RecordingIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 29\n        }\n      }))), React.createElement(BlurView, {\n        tint: \"dark\",\n        intensity: 20,\n        style: fullPageVideoStyles.questionArrowsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: viewAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: styles.viewAllText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 29\n        }\n      }, \"View All\")), React.createElement(Question, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }\n      })), React.createElement(ViewAllPopup, {\n        visible: viewAllVisible,\n        setVisible: setViewAllVisible,\n        questionData: questionData,\n        setIndex: setIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        style: styles.viewBackground,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 17\n        }\n      }, React.createElement(Video, {\n        source: {\n          uri: videoUri\n        },\n        rate: 1.0,\n        volume: 1.0,\n        isMuted: false,\n        resizeMode: \"cover\",\n        usePoster: true,\n        shouldPlay: shouldPlay,\n        isLooping: true,\n        onLoad: onLoad,\n        style: styles.videoDimensions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }\n      }), React.createElement(BlurView, {\n        tint: \"dark\",\n        intensity: 20,\n        style: fullPageVideoStyles.questionArrowsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }\n      }, React.createElement(Question, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 25\n        }\n      })), React.createElement(View, {\n        style: addStyles.uploadContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: back,\n        style: styles.iconGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 25\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"backspace\",\n        color: \"#eee\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        style: styles.iconTextRecorded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 29\n        }\n      }, \"Back\")), React.createElement(TouchableOpacity, {\n        onPress: sendVideo,\n        style: styles.iconGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 25\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"send\",\n        color: \"#eee\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        style: styles.iconTextRecorded,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 29\n        }\n      }, \"Post\"))), React.createElement(ViewAllPopup, {\n        visible: viewAllVisible,\n        setVisible: setViewAllVisible,\n        questionData: questionData,\n        setIndex: setIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }\n      }));\n    }\n  } else {\n    if (timedOut) {\n      return React.createElement(View, {\n        style: styles.badInternetView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          borderWidth: 1,\n          borderColor: '#eee',\n          justifyContent: 'center',\n          borderRadius: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.reloadText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 25\n        }\n      }, \"We are losing you. Please check your network connection.\")));\n    } else {\n      return React.createElement(View, {\n        style: styles.activityView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 17\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"small\",\n        color: \"#eee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 19\n        }\n      }));\n    }\n  }\n\n  function Question() {\n    if (questionData.length == 0) {\n      return React.createElement(Text, {\n        style: styles.loadingText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 20\n        }\n      }, \"Loading...\");\n    } else if (videoUri == \"\") {\n      return React.createElement(View, {\n        style: styles.questionView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.backPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-arrow-round-back\",\n        color: \"#eee\",\n        onPress: goBack,\n        size: 45,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 25\n        }\n      })), React.createElement(Text, {\n        style: styles.questionText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 21\n        }\n      }, questionData[index].questionText), React.createElement(View, {\n        style: styles.forwardPadding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 21\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-arrow-round-forward\",\n        color: \"#eee\",\n        onPress: goForward,\n        size: 45,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 25\n        }\n      })));\n    } else {\n      return React.createElement(View, {\n        style: styles.questionView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.questionText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 21\n        }\n      }, questionData[index].questionText));\n    }\n  }\n}\nvar styles = StyleSheet.create({\n  recordingIconSingle: {\n    alignSelf: 'flex-end',\n    alignItems: 'center',\n    padding: 20,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    width: '100%'\n  },\n  recordingIconMultiple: {\n    alignSelf: 'flex-end',\n    alignItems: 'center',\n    padding: 20,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '100%'\n  },\n  iconGroup: {\n    alignItems: 'center'\n  },\n  iconText: {\n    color: '#eee',\n    fontSize: 12\n  },\n  iconTextRecorded: {\n    color: '#eee',\n    fontSize: 15\n  },\n  permissionDisabled: {\n    color: '#1da1f2',\n    fontSize: 16\n  },\n  permissionEnabled: {\n    color: '#696969',\n    fontSize: 16\n  },\n  cameraPermissionsPadding: {\n    padding: 30\n  },\n  permissionsViewBackground: {\n    backgroundColor: '#000',\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  permissionsTitle: {\n    color: '#eee',\n    fontSize: 22,\n    fontWeight: 'bold',\n    paddingBottom: 20\n  },\n  permissionsSubtitle: {\n    color: '#eee',\n    fontSize: 17,\n    paddingBottom: 20\n  },\n  viewBackground: {\n    flex: 1,\n    backgroundColor: '#000'\n  },\n  cameraFlex: {\n    flex: 1\n  },\n  cameraView: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    flexDirection: 'row'\n  },\n  viewAllText: {\n    color: '#eee'\n  },\n  videoDimensions: {\n    width: '100%',\n    height: '100%'\n  },\n  activityView: {\n    backgroundColor: '#000',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1\n  },\n  loadingText: {\n    fontSize: 18,\n    color: \"#eee\",\n    padding: 15,\n    textAlign: 'center'\n  },\n  questionView: {\n    flexDirection: 'row',\n    height: 90,\n    alignItems: 'center'\n  },\n  questionText: {\n    fontSize: 20,\n    color: \"#eee\",\n    textAlign: 'center',\n    width: '75%'\n  },\n  backPadding: {\n    paddingRight: 15\n  },\n  forwardPadding: {\n    paddingLeft: 15\n  },\n  reloadText: {\n    color: '#eee',\n    fontSize: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 5\n  },\n  badInternetView: {\n    backgroundColor: '#000',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1\n  }\n});","map":{"version":3,"sources":["/Users/vaibhavverma9/Desktop/realtalk-app/dating-app/app/components/addPage/AddCameraContents.tsx"],"names":["React","useState","useEffect","useContext","useRef","Camera","BlurView","fullPageVideoStyles","Ionicons","MaterialIcons","Segment","ImagePicker","Permissions","Video","addStyles","VideoThumbnails","Linking","ViewAllPopup","VideoCountContext","Constants","AddCameraContents","props","questionData","setQuestionData","hasCameraPermission","setHasCameraPermission","hasAudioPermission","setHasAudioPermission","Type","back","type","setType","index","setIndex","videoUri","setVideoUri","thumbnailUri","setThumbnailUri","recording","setRecording","shouldPlay","setShouldPlay","initialized","setInitialized","viewAllVisible","setViewAllVisible","timedOut","setTimedOut","videoCount","setVideoCount","initQuestions","data","camera","getAudioPermission","getCameraPermission","screen","setTimeout","getAsync","CAMERA","status","AUDIO_RECORDING","askCameraPermission","askAsync","sendToSettings","askAudioPermission","openURL","navigation","addListener","platform","date","Date","weekday","getDay","filteredQuestions","questions","filter","question","goBack","rem","length","goForward","pickVideo","track","getPermissionAsync","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uri","getThumbnailAsync","time","alert","setCameraType","front","CAMERA_ROLL","record","current","recordAsync","stopRecording","RecordingIcon","styles","recordingIconSingle","recordingIconMultiple","iconGroup","iconText","sendVideo","passthroughId","Math","floor","random","console","log","questionText","id","toString","navigate","params","questionId","videoId","viewAll","EnableCameraButton","cameraPermissionsPadding","permissionDisabled","permissionEnabled","EnableAudioButton","onLoad","durationMillis","Alert","ceil","text","onPress","cancelable","permissionsViewBackground","permissionsTitle","permissionsSubtitle","viewBackground","cameraFlex","cameraView","questionArrowsContainer","viewAllText","videoDimensions","uploadContainer","iconTextRecorded","badInternetView","borderWidth","borderColor","justifyContent","borderRadius","reloadText","activityView","Question","loadingText","questionView","backPadding","forwardPadding","StyleSheet","create","alignSelf","alignItems","padding","flexDirection","width","color","fontSize","backgroundColor","flex","fontWeight","paddingBottom","height","textAlign","paddingRight","paddingLeft","paddingHorizontal","paddingVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react'; \nimport { View, Text, TouchableOpacity, ActivityIndicator, StyleSheet, Alert } from 'react-native'; \nimport { Camera } from 'expo-camera';\nimport { BlurView } from 'expo-blur';\nimport { fullPageVideoStyles } from '../../styles/fullPageVideoStyles';\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons'\nimport * as Segment from 'expo-analytics-segment';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { Video } from 'expo-av'; \nimport { addStyles } from '../../styles/addStyles';\nimport * as VideoThumbnails from 'expo-video-thumbnails'; \nimport * as Linking from 'expo-linking';\nimport ViewAllPopup from '../modals/ViewAllPopup';\nimport { VideoCountContext } from '../../utils/context/VideoCountContext';\nimport Constants from 'expo-constants';\n\nexport default function AddCameraContents(props) {\n\n    const [questionData, setQuestionData] = useState([]);\n    const [hasCameraPermission, setHasCameraPermission] = useState(null);\n    const [hasAudioPermission, setHasAudioPermission] = useState(null);\n    const [type, setType] = useState(Camera.Constants.Type.back);\n    const [index, setIndex] = useState(0);\n    const [videoUri, setVideoUri] = useState('');\n    const [thumbnailUri, setThumbnailUri] = useState('');\n    const [recording, setRecording] = useState(false); \n    const [shouldPlay, setShouldPlay] = useState(true);\n    const [initialized, setInitialized] = useState(false); \n    const [viewAllVisible, setViewAllVisible] = useState(false); \n    const [timedOut, setTimedOut] = useState(false);    \n    const [videoCount, setVideoCount] = useContext(VideoCountContext); \n\n    useEffect(() => { \n        initQuestions(props.data); \n    }, [props.data])\n\n    const camera = useRef(null);  \n\n    useEffect(() => {\n        getAudioPermission(); \n        getCameraPermission();\n        Segment.screen('Add'); \n        setTimeout(() => { setTimedOut(true) }, 3000); \n    }, []);\n\n    async function getCameraPermission(){\n        const { status } = await Permissions.getAsync(Permissions.CAMERA);\n        setHasCameraPermission(status === 'granted');\n    };\n\n    async function getAudioPermission(){\n        const { status } = await Permissions.getAsync(Permissions.AUDIO_RECORDING);\n        setHasAudioPermission(status === 'granted');\n    };\n\n    async function askCameraPermission(){\n        const { status } = await Permissions.askAsync(Permissions.CAMERA);\n        setHasCameraPermission(status === 'granted');\n        if(status !== 'granted'){\n            sendToSettings(); \n        }\n    };\n\n    async function askAudioPermission(){\n        const { status } = await Permissions.askAsync(Permissions.AUDIO_RECORDING);\n        setHasAudioPermission(status === 'granted');\n        if(status !== 'granted'){\n            sendToSettings(); \n        }\n    };\n\n    function sendToSettings(){\n        Linking.openURL('app-settings://')\n    }\n\n    // changes in tabs will affect shouldPlay \n    useEffect(() => {\n        props.navigation.addListener('blur', () => {\n            setShouldPlay(false);\n\n            if ('android' in Constants.platform) {\n                setInitialized(false); \n                setTimedOut(false); \n                setTimeout(() => { setTimedOut(false) }, 3000); \n            }\n        });\n\n        props.navigation.addListener('focus', () => {\n            if ('android' in Constants.platform) {\n                setInitialized(true); \n                setTimeout(() => { setTimedOut(true) }, 3000); \n            }\n\n            setShouldPlay(true); \n            if(hasCameraPermission === false){\n                getCameraPermission();\n            } \n            if(hasAudioPermission === false){\n                getAudioPermission(); \n            }\n\n        });  \n    }, [props.navigation, hasAudioPermission, hasCameraPermission])\n \n    function initQuestions(questionData){\n        const date = new Date(); \n        const weekday = date.getDay(); \n        const filteredQuestions = questionData.questions.filter((question, index) => {\n            if(index % 7 == weekday){\n                return question; \n            }\n        });\n        setQuestionData(filteredQuestions); \n        setIndex(0); \n        setInitialized(true); \n    }\n\n    // tapping back arrow \n    const goBack = () => {\n        const rem = (index - 1) % questionData.length;\n        if (rem < 0) { setIndex(rem + questionData.length)}\n        else { setIndex(rem) }\n    }\n\n    // tapping forward arrow\n    const goForward = () => {\n        setIndex((index + 1) % questionData.length);\n    }\n\n    // Handle video selection \n    const pickVideo = async () => {\n        Segment.track(\"Pick Video\"); \n        await getPermissionAsync(); \n        try {\n            const result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\n            allowsEditing: true,\n            aspect: [4, 3],\n            quality: 1,\n            });\n            if (!result.cancelled && result.type == 'video') {\n                setVideoUri(result.uri);\n                const { uri } = await VideoThumbnails.getThumbnailAsync(result.uri, { time: 0 }); \n                setThumbnailUri(uri);           \n            }\n            if (!result.cancelled && result.type == 'image') {\n                alert('Sorry, please upload a video!');\n            }\n        } catch (error) {}\n    };\n\n    function back(){\n        setVideoUri(\"\");\n        setThumbnailUri(\"\");           \n    }\n\n    function setCameraType(){\n        setType(\n            type === Camera.Constants.Type.back\n            ? Camera.Constants.Type.front\n            : Camera.Constants.Type.back\n        );\n    }\n\n    const getPermissionAsync = async () => {\n        const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n        if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n        }\n    };\n\n    async function record(){\n        if(camera){\n            setRecording(true); \n            const recording = await camera.current.recordAsync();\n            setVideoUri(recording.uri); \n            const { uri } = await VideoThumbnails.getThumbnailAsync(recording.uri, { time: 0 }); \n            setThumbnailUri(uri);           \n        }\n    }\n\n    async function stopRecording(){\n        if(camera){\n            setRecording(false); \n            camera.current.stopRecording(); \n        }\n    }\n\n    function RecordingIcon (){\n        if(recording){            \n            return (\n                <View style={styles.recordingIconSingle}>\n                    <MaterialIcons name=\"fiber-manual-record\" onPress={stopRecording} color={\"#FF0000\"} size={60}/>  \n                </View>\n            )\n        } else {\n            return (\n                <View style={styles.recordingIconMultiple}>\n                    <TouchableOpacity onPress={pickVideo} style={styles.iconGroup}>\n                        <MaterialIcons name=\"video-library\" color={\"#eee\"} size={40}/> \n                        <Text style={styles.iconText}>Library</Text>\n                    </TouchableOpacity>\n                    <MaterialIcons name=\"fiber-manual-record\" onPress={record} color={\"#eee\"} size={60}/>  \n                    <TouchableOpacity onPress={setCameraType} style={styles.iconGroup}>\n                        <MaterialIcons name=\"switch-camera\" color={\"#eee\"} size={40}/>                     \n                        <Text style={styles.iconText}>Reverse</Text>\n                    </TouchableOpacity>\n                </View>\n\n                )\n        }\n    }\n\n    async function sendVideo() {\n        const passthroughId = Math.floor(Math.random() * 1000000000) + 1; \n\n        console.log(videoUri, thumbnailUri, questionData[index].questionText, questionData[index].id, passthroughId.toString());\n        await props.navigation.navigate('Videos', { screen: 'VideosView', params: {videoUri: videoUri, thumbnailUri: thumbnailUri, questionText: questionData[index].questionText, questionId: questionData[index].id, status: 'waiting', passthroughId: passthroughId.toString(), type: 'uploadedVideo', id: passthroughId, videoId: null }});\n        setVideoUri(''); \n        setThumbnailUri(''); \n        setVideoCount(videoCount + 1);     \n    }\n\n    function viewAll(){\n        setViewAllVisible(true); \n    }\n\n\n    function EnableCameraButton(){\n        if(hasCameraPermission === null){\n            return(\n                <TouchableOpacity onPress={askCameraPermission} style={styles.cameraPermissionsPadding}>\n                    <Text style={styles.permissionDisabled}>Enable Camera Access</Text>\n                </TouchableOpacity>\n            )\n        } else if (hasCameraPermission === false){\n            return(\n                <TouchableOpacity onPress={askCameraPermission} style={styles.cameraPermissionsPadding}>\n                    <Text style={styles.permissionDisabled}>Enable Camera Access</Text>\n                </TouchableOpacity>\n            )\n        } else {\n            return(\n                <View style={styles.cameraPermissionsPadding}>\n                    <Text style={styles.permissionEnabled}>Camera Access Enabled</Text>\n                </View>\n            )\n        }\n    }\n\n    function EnableAudioButton(){\n        if(hasAudioPermission === null){\n            return(\n                <TouchableOpacity onPress={askAudioPermission}>\n                    <Text style={styles.permissionDisabled}>Enable Microphone Access</Text>\n                </TouchableOpacity>\n            )\n        } else if (hasAudioPermission === false){\n            return(\n                <TouchableOpacity onPress={askAudioPermission}>\n                    <Text style={styles.permissionDisabled}>Enable Microphone Access</Text>\n                </TouchableOpacity>\n            )\n        } else {\n            return(\n                <View>\n                    <Text style={styles.permissionEnabled}>Microphone Access Enabled</Text>\n                </View>\n            )\n        }\n    }\n\n    const onLoad = (data) => {\n        if(data.durationMillis > 30000){\n            Alert.alert(\n                \"Your video is too long!\", \n                \"Videos must be less than 30 seconds long. Yours was \" + Math.ceil(data.durationMillis / 1000) + \" seconds :(\", \n                [\n                    {text: \"Ok\", onPress: () => {\n                        setVideoUri(''); \n                        setThumbnailUri('');                        \n                    }}\n                ], \n                { cancelable: false }\n            ); \n        } \n    }\n    \n    if(initialized){\n        if (hasCameraPermission !== true || hasAudioPermission !== true) {\n            return (\n                <View style={styles.permissionsViewBackground}>\n                    <Text style={styles.permissionsTitle}>Share on Realtalk</Text>\n                    <Text style={styles.permissionsSubtitle}>Enable access so you can start taking videos.</Text>\n                    <EnableCameraButton />\n                    <EnableAudioButton />\n                </View>\n            )\n        }\n    \n        if(videoUri == \"\"){\n            return(\n                <View style={styles.viewBackground}>\n                    <Camera \n                        style={styles.cameraFlex} \n                        type={type}\n                        ref={camera}\n                    >\n                        <View\n                        style={styles.cameraView}>\n                            <RecordingIcon />\n                        </View>\n                    </Camera>\n                    <BlurView tint=\"dark\" intensity={20} style={fullPageVideoStyles.questionArrowsContainer}>\n                        <TouchableOpacity onPress={viewAll}>\n                            <Text style={styles.viewAllText}>View All</Text>\n                        </TouchableOpacity>\n\n                        <Question /> \n                    </BlurView>\n                    <ViewAllPopup \n                        visible={viewAllVisible} \n                        setVisible={setViewAllVisible} \n                        questionData={questionData}\n                        setIndex={setIndex}\n                    />\n                </View>\n            )\n        } else {\n            return (\n                <View style={styles.viewBackground}>\n                    <Video\n                    source={{uri: videoUri}}\n                    rate={1.0}\n                    volume={1.0}\n                    isMuted={false}\n                    resizeMode=\"cover\"\n                    usePoster={true}\n                    shouldPlay={shouldPlay}\n                    isLooping\n                    onLoad={onLoad}\n                    style={styles.videoDimensions}\n                    >\n                    </Video>\n                    <BlurView tint=\"dark\" intensity={20} style={fullPageVideoStyles.questionArrowsContainer}>\n                        <Question /> \n                    </BlurView>\n                    <View style={addStyles.uploadContainer}>\n                        <TouchableOpacity onPress={back} style={styles.iconGroup}>\n                            <MaterialIcons name=\"backspace\" color={\"#eee\"} size={40}/>     \n                            <Text style={styles.iconTextRecorded}>Back</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity onPress={sendVideo} style={styles.iconGroup}>\n                            <MaterialIcons name=\"send\" color={\"#eee\"} size={40}/>     \n                            <Text style={styles.iconTextRecorded}>Post</Text>\n                        </TouchableOpacity>\n                    </View>\n                    <ViewAllPopup \n                        visible={viewAllVisible} \n                        setVisible={setViewAllVisible} \n                        questionData={questionData}\n                        setIndex={setIndex}\n                    />\n                </View>\n            )\n        }\n    } else {\n        if(timedOut){\n            return (\n                <View style={styles.badInternetView}>\n                    <View style={{ borderWidth: 1, borderColor: '#eee', justifyContent: 'center', borderRadius: 5}}>\n                        <Text style={styles.reloadText}>We are losing you. Please check your network connection.</Text>          \n                    </View>\n                </View>\n              )\n          } else {\n            return (\n                <View style={styles.activityView}>\n                  <ActivityIndicator size=\"small\" color=\"#eee\" />\n                </View>\n            )          \n        }  \n    }\n\n\n    function Question () {\n        if(questionData.length == 0){\n            return(<Text style={styles.loadingText}>Loading...</Text>)\n        } else if(videoUri == \"\"){\n            return(\n                <View style={styles.questionView}>\n                    <View style={styles.backPadding}>\n                        <Ionicons name=\"ios-arrow-round-back\" color={\"#eee\"} onPress={goBack} size={45} />\n                    </View>\n                    <Text style={styles.questionText}>\n                        {questionData[index].questionText}\n                    </Text>\n                    <View style={styles.forwardPadding}>\n                        <Ionicons name=\"ios-arrow-round-forward\"  color={\"#eee\"} onPress={goForward} size={45}/>\n                    </View>\n                </View>\n            )    \n        } else {\n            return(\n                <View style={styles.questionView}>\n                    <Text style={styles.questionText}>\n                        {questionData[index].questionText}\n                    </Text>\n                </View>\n            )    \n        }\n    }\n}\n\nconst styles = StyleSheet.create({\n    recordingIconSingle: { \n        alignSelf: 'flex-end', \n        alignItems: 'center', \n        padding: 20, \n        flexDirection: 'row', \n        justifyContent: 'center', \n        width: '100%'\n    },\n    recordingIconMultiple: { \n        alignSelf: 'flex-end', \n        alignItems: 'center', \n        padding: 20, \n        flexDirection: 'row', \n        justifyContent: 'space-between', \n        width: '100%'\n    },\n    iconGroup: { \n        alignItems: 'center'\n    },\n    iconText: { \n        color: '#eee', \n        fontSize: 12\n    },\n    iconTextRecorded: { color: '#eee', fontSize: 15},\n    permissionDisabled: { \n        color: '#1da1f2', \n        fontSize: 16 \n    },\n    permissionEnabled: { \n        color: '#696969', \n        fontSize: 16 \n    },\n    cameraPermissionsPadding: { padding: 30},\n    permissionsViewBackground: { backgroundColor: '#000', flex: 1, justifyContent: 'center', alignItems: 'center'},\n    permissionsTitle: { color: '#eee', fontSize: 22, fontWeight: 'bold', paddingBottom: 20},\n    permissionsSubtitle: { color: '#eee', fontSize: 17, paddingBottom: 20},\n    viewBackground: { flex: 1, backgroundColor: '#000' },\n    cameraFlex: { flex: 1 },\n    cameraView: {\n        flex: 1,\n        backgroundColor: 'transparent',\n        flexDirection: 'row',\n    },\n    viewAllText: { color: '#eee'},\n    videoDimensions: { width: '100%', height: '100%'},\n    activityView: { backgroundColor: '#000', justifyContent: 'center', alignItems: 'center', flex: 1},\n    loadingText: {fontSize: 18,color: \"#eee\", padding: 15, textAlign: 'center'},\n    questionView: { flexDirection: 'row', height:90, alignItems: 'center'},\n    questionText: {fontSize: 20, color: \"#eee\", textAlign: 'center', width: '75%'},\n    backPadding: { paddingRight: 15},\n    forwardPadding: { paddingLeft: 15},\n    reloadText: { color: '#eee', fontSize: 20, paddingHorizontal: 20, paddingVertical: 5},\n    badInternetView: { backgroundColor: '#000', justifyContent: 'center', alignItems: 'center', flex: 1}\n});"]},"metadata":{},"sourceType":"module"}